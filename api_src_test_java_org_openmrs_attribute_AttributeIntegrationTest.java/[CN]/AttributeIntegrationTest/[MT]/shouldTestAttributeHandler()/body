{
  Visit visit=new Visit();
  VisitAttributeType paymentDateAttrType=new VisitAttributeType();
  paymentDateAttrType.setDatatypeClassname(org.openmrs.customdatatype.datatype.Date.class.getName());
  VisitAttribute legalDate=new VisitAttribute();
  legalDate.setAttributeType(paymentDateAttrType);
  legalDate.setValue(new java.sql.Date(new SimpleDateFormat("yyyy-MM-dd").parse("2011-04-15").getTime()));
  Assert.assertEquals("2011-04-15",legalDate.getValueReference());
  Assert.assertEquals(new SimpleDateFormat("yyyy-MM-dd").parse("2011-04-15"),legalDate.getValue());
  visit.addAttribute(legalDate);
  Assert.assertEquals(1,visit.getAttributes().size());
}
