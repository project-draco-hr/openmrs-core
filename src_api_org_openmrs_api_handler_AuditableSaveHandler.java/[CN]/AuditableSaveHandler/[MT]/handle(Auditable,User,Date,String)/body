{
  User user=Context.getUserService().getUser(currentUser.getId());
  if (auditable.getCreator() == null) {
    auditable.setCreator(user);
  }
  if (auditable.getDateCreated() == null) {
    auditable.setDateCreated(currentDate);
  }
  boolean hasId;
  try {
    hasId=auditable.getId() != null;
  }
 catch (  UnsupportedOperationException e) {
    hasId=true;
  }
  if (hasId) {
    auditable.setChangedBy(user);
    auditable.setDateChanged(currentDate);
  }
}
