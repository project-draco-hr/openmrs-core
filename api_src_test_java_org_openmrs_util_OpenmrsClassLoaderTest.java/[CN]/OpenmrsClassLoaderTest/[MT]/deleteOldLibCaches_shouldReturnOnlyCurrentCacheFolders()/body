{
  FilenameFilter cacheDirFilter=new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return name.endsWith(".openmrs-lib-cache");
    }
  }
;
  File oldCache=new File(System.getProperty("java.io.tmpdir"),"oldCache.openmrs-lib-cache");
  OpenmrsClassLoader.deleteOldLibCaches(oldCache);
  oldCache.mkdirs();
  File currentCache=new File(System.getProperty("java.io.tmpdir"),"currentCache.openmrs-lib-cache");
  currentCache.mkdirs();
  File tempDir=currentCache.getParentFile();
  Assert.assertEquals(2,tempDir.listFiles(cacheDirFilter).length);
  OpenmrsClassLoader.deleteOldLibCaches(currentCache);
  Assert.assertEquals(1,tempDir.listFiles(cacheDirFilter).length);
  Assert.assertEquals(tempDir.listFiles(cacheDirFilter)[0],currentCache);
}
