{
  FilenameFilter cacheDirFilter=new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return name.endsWith(".openmrs-lib-cache");
    }
  }
;
  File oldCache=new File(System.getProperty("java.io.tmpdir"),"001.openmrs-lib-cache");
  File olderCache=new File(System.getProperty("java.io.tmpdir"),"2001.openmrs-lib-cache");
  oldCache.mkdirs();
  olderCache.mkdirs();
  File currentCache=new File(System.getProperty("java.io.tmpdir"),"002.openmrs-lib-cache");
  currentCache.mkdirs();
  File tempDir=currentCache.getParentFile();
  int beforeDelete=tempDir.listFiles(cacheDirFilter).length;
  OpenmrsClassLoader.deleteOldLibCaches(currentCache);
  int afterDelete=tempDir.listFiles(cacheDirFilter).length;
  if (beforeDelete > 1)   Assert.assertTrue(beforeDelete > afterDelete);
  Assert.assertEquals(tempDir.listFiles(cacheDirFilter)[0],currentCache);
}
