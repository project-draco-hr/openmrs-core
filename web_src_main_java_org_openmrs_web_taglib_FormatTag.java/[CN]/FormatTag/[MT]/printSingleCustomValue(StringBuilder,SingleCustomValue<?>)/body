{
  CustomValueDescriptor descriptor=val.getDescriptor();
  CustomDatatype<?> datatype=CustomDatatypeUtil.getDatatype(descriptor);
  CustomDatatypeHandler handler=CustomDatatypeUtil.getHandler(descriptor);
  if (handler != null) {
    sb.append(handler.render(datatype,val.getValueReference(),null));
  }
 else   if (datatype != null) {
    sb.append(datatype.getTextSummary(val.getValueReference()));
  }
 else {
    sb.append(val.getValueReference());
  }
}
