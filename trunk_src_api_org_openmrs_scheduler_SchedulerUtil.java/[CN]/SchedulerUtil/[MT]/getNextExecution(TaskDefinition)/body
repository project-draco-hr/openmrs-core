{
  Calendar nextTime=Calendar.getInstance();
  try {
    Date firstTime=taskDefinition.getStartTime();
    if (firstTime != null) {
      Date currentTime=new Date();
      if (firstTime.after(currentTime)) {
        return firstTime;
      }
      long repeatInterval=taskDefinition.getRepeatInterval().longValue();
      long betweenTime=currentTime.getTime() - firstTime.getTime();
      long lastTime=(betweenTime % (repeatInterval * 1000));
      long additional=((repeatInterval * 1000) - lastTime);
      nextTime.setTime(new Date(currentTime.getTime() + additional));
      log.info("Start time: " + firstTime);
      log.info("Curr time : " + currentTime);
      log.info("Next time : " + nextTime.getTime());
    }
  }
 catch (  Exception e) {
    log.error("Failed to get next execution time for " + taskDefinition.getName());
  }
  return nextTime.getTime();
}
