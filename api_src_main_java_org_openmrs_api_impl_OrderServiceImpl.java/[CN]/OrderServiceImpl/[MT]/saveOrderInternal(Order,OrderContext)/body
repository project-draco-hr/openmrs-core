{
  if (order.getOrderId() == null) {
    setProperty(order,"orderNumber",getOrderNumberGenerator().getNewOrderNumber(orderContext));
    if (DISCONTINUE == order.getAction()) {
      order.setAutoExpireDate(order.getDateActivated());
    }
  }
  return dao.saveOrder(order);
}
