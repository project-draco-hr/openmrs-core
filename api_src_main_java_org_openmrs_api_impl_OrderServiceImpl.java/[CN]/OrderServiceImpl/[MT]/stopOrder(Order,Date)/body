{
  if (discontinueDate == null) {
    discontinueDate=new Date();
  }
  if (discontinueDate.after(new Date())) {
    throw new IllegalArgumentException("Discontinue date cannot be in the future");
  }
  if (DISCONTINUE == orderToStop.getAction()) {
    throw new APIException("Order.action.cannot.discontinued",new Object[]{DISCONTINUE});
  }
  if (!orderToStop.isActive()) {
    throw new APIException("Order.stopped.cannot.discontinued",(Object[])null);
  }
  setProperty(orderToStop,"dateStopped",discontinueDate);
  saveOrderInternal(orderToStop,null);
}
