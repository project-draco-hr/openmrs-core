{
  AddEncounterToVisitExtension ext1=mock(AddEncounterToVisitExtension.class);
  Set<Link> links1=new HashSet<Link>();
  Link link1=new Link();
  link1.setLabel("a");
  links1.add(link1);
  Link link2=new Link();
  link2.setLabel("b");
  links1.add(link2);
  when(ext1.getAddEncounterToVisitLinks()).thenReturn(links1);
  AddEncounterToVisitExtension ext2=mock(AddEncounterToVisitExtension.class);
  Set<Link> links2=new HashSet<Link>();
  Link link3=new Link();
  link3.setLabel("aa");
  links2.add(link3);
  when(ext2.getAddEncounterToVisitLinks()).thenReturn(links2);
  List<Extension> extensions=new ArrayList<Extension>();
  extensions.add(ext1);
  extensions.add(ext2);
  mockStatic(ModuleFactory.class);
  when(ModuleFactory.getExtensions("org.openmrs.module.web.extension.AddEncounterToVisitExtension")).thenReturn(extensions);
  Set<Link> allAddEncounterToVisitLinks=ExtensionUtil.getAllAddEncounterToVisitLinks();
  assertTrue(allAddEncounterToVisitLinks.contains(link1));
  assertTrue(allAddEncounterToVisitLinks.contains(link2));
  assertTrue(allAddEncounterToVisitLinks.contains(link3));
}
