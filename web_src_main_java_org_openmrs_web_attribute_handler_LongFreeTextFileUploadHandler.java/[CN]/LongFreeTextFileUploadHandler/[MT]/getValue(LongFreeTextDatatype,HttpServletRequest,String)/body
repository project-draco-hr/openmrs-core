{
  if (request instanceof MultipartRequest) {
    MultipartFile file=((MultipartRequest)request).getFile(formFieldName);
    try {
      return new String(file.getBytes());
    }
 catch (    IOException e) {
      throw new InvalidCustomValueException("Error handling file upload as a String",e);
    }
  }
 else {
    throw new IllegalArgumentException("Programming error: file upload handler can only be used in a form with enctype='multipart/form-data'");
  }
}
