{
  TaskDefinition task=(TaskDefinition)command;
  String[] names=request.getParameterValues("propertyName");
  String[] values=request.getParameterValues("propertyValue");
  Map<String,String> properties=new HashMap<String,String>();
  if (names != null) {
    for (int x=0; x < names.length; x++) {
      if (names[x].length() > 0) {
        properties.put(names[x],values[x]);
      }
    }
  }
  task.setProperties(properties);
  String units=request.getParameter("repeatIntervalUnits");
  Long interval=task.getRepeatInterval();
  if (interval != null) {
    if ("minutes".equals(units)) {
      interval=interval * 60;
    }
 else     if ("hours".equals(units)) {
      interval=interval * 60 * 60;
    }
 else     if ("days".equals(units)) {
      interval=interval * 60 * 60* 24;
    }
    task.setRepeatInterval(interval);
  }
 else {
    task.setRepeatInterval(0L);
  }
  return super.processFormSubmission(request,response,task,errors);
}
