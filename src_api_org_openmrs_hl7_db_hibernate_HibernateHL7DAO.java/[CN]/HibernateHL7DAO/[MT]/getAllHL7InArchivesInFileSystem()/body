{
  List<File> filesInArchivesDir=getAllFiles(HL7Util.getHl7ArchivesDirectory(),null);
  List<HL7InArchive> archivesList=null;
  if (filesInArchivesDir != null) {
    archivesList=new LinkedList<HL7InArchive>();
    Iterator<File> it=filesInArchivesDir.iterator();
    while (it.hasNext()) {
      File file=it.next();
      HL7InArchive archive=constructHl7Archive(file);
      if (archive != null)       archivesList.add(archive);
 else       log.warn("Failed to instatiate an hl7 archive for the file '" + file.getAbsoluteFile() + "'");
    }
  }
  return archivesList;
}
