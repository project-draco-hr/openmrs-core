{
  EncounterService encounterService=Context.getEncounterService();
  Encounter encounter=buildEncounter();
  Date date=new Date(System.currentTimeMillis() - 5000);
  encounter.setDateCreated(date);
  User creator=new User(1);
  encounter.setCreator(creator);
  Obs obs=new Obs(new Patient(2),new Concept(1),new Date(),new Location(1));
  obs.setDateCreated(date);
  obs.setCreator(creator);
  encounter.addObs(obs);
  Order order=new Order();
  order.setConcept(new Concept(1));
  order.setPatient(new Patient(2));
  Field field=Order.class.getDeclaredField("orderNumber");
  field.setAccessible(true);
  field.set(order,"ORD-1");
  order.setDateCreated(date);
  order.setCreator(creator);
  order.setCareSetting(Context.getOrderService().getCareSetting(1));
  encounter.addOrder(order);
  assertNotSame(encounter.getCreator(),Context.getAuthenticatedUser());
  encounterService.saveEncounter(encounter);
  Obs createdObs=Context.getObsService().getObs(obs.getObsId());
  assertEquals(date,createdObs.getDateCreated());
  assertEquals(creator,createdObs.getCreator());
  Order createdOrder=Context.getOrderService().getOrder(order.getOrderId());
  assertEquals(date,createdOrder.getDateCreated());
  assertEquals(creator,createdOrder.getCreator());
}
