{
  executeDataSet(INITIAL_OBS_XML);
  EncounterService es=Context.getEncounterService();
  ObsService obsService=Context.getObsService();
  ConceptService conceptService=Context.getConceptService();
  Obs o=new Obs();
  Order order1=null;
  Concept concept1=conceptService.getConcept(1);
  Patient patient1=new Patient(2);
  Encounter encounter1=(Encounter)es.getEncounter(1);
  Date datetime1=new Date();
  Location location1=es.getLocation(1);
  Integer groupId1=new Integer(1);
  Integer valueGroupId1=new Integer(5);
  Date valueDatetime1=new Date();
  Concept valueCoded1=conceptService.getConcept(2);
  Double valueNumeric1=1.0;
  String valueModifier1="a1";
  String valueText1="value text1";
  String comment1="commenting1";
  o.setOrder(order1);
  o.setConcept(concept1);
  o.setPerson(patient1);
  o.setEncounter(encounter1);
  o.setObsDatetime(datetime1);
  o.setLocation(location1);
  o.setObsGroupId(groupId1);
  o.setValueGroupId(valueGroupId1);
  o.setValueDatetime(valueDatetime1);
  o.setValueCoded(valueCoded1);
  o.setValueNumeric(valueNumeric1);
  o.setValueModifier(valueModifier1);
  o.setValueText(valueText1);
  o.setComment(comment1);
  obsService.createObs(o);
  Obs o2=obsService.getObs(o.getObsId());
  assertNotNull(o2);
  Order order2=null;
  Concept concept2=conceptService.getConcept(2);
  Patient patient2=new Patient(1);
  System.out.println("patient2: " + patient2.getPatientId());
  Encounter encounter2=(Encounter)es.getEncounter(2);
  Date datetime2=new Date();
  Location location2=es.getLocation(1);
  Integer groupId2=new Integer(2);
  Integer valueGroupId2=new Integer(3);
  Date valueDatetime2=new Date();
  Concept valueCoded2=conceptService.getConcept(2);
  Double valueNumeric2=2.0;
  String valueModifier2="cc";
  String valueText2="value text2";
  String comment2="commenting2";
  o2.setOrder(order2);
  o2.setConcept(concept2);
  o2.setPerson(patient2);
  o2.setEncounter(encounter2);
  o2.setObsDatetime(datetime2);
  o2.setLocation(location2);
  o2.setObsGroupId(groupId2);
  o2.setValueGroupId(valueGroupId2);
  o2.setValueDatetime(valueDatetime2);
  o2.setValueCoded(valueCoded2);
  o2.setValueNumeric(valueNumeric2);
  o2.setValueModifier(valueModifier2);
  o2.setValueText(valueText2);
  o2.setComment(comment2);
  obsService.updateObs(o2);
  Obs o3=obsService.getObs(o2.getObsId());
  System.out.println("o3.isComplex(): " + o3.isComplexObs());
  assertTrue(o3.equals(o));
  if (order2 != null)   assertTrue(o3.getOrder().equals(order2));
  assertTrue(o3.getPerson().equals(patient2));
  assertTrue(o3.getComment().equals(comment2));
  assertTrue(o3.getConcept().equals(concept2));
  assertTrue(o3.getEncounter().equals(encounter2));
  assertTrue(o3.getObsDatetime().equals(datetime2));
  assertTrue(o3.getLocation().equals(location2));
  assertTrue(o3.getObsGroupId().equals(groupId2));
  assertTrue(o3.getValueGroupId().equals(valueGroupId2));
  assertTrue(o3.getValueDatetime().equals(valueDatetime2));
  assertTrue(o3.getValueCoded().equals(valueCoded2));
  assertTrue(o3.getValueNumeric().equals(valueNumeric2));
  assertTrue(o3.getValueModifier().equals(valueModifier2));
  assertTrue(o3.getValueText().equals(valueText2));
  obsService.voidObs(o,"testing void function");
  Obs o4=obsService.getObs(o.getObsId());
  assertTrue(o4.getVoidReason().equals("testing void function"));
  assertTrue(o4.getVoidedBy().equals(o3.getVoidedBy()));
  assertTrue(o4.isVoided());
  obsService.deleteObs(o);
  assertNull(obsService.getObs(o.getObsId()));
}
