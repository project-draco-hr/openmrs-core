{
  executeDataSet(INITIAL_OBS_XML);
  ObsService obsService=Context.getObsService();
  Obs obs=new Obs(new Patient(2),new Concept(1),new Date(),new Location(1));
  Obs savedObs=obsService.saveObs(obs,null);
  assertTrue(savedObs.equals(obs));
  obs.setVoided(Boolean.TRUE);
  obs.setVoidedBy(new User(1));
  String reason="Testing voiding a voided obs";
  Obs notVoidedObs=obsService.voidObs(obs,reason);
  assertTrue(notVoidedObs.equals(obs));
  assertFalse(reason.equals(obs.getVoidReason()));
  obs.setVoided(Boolean.FALSE);
  Obs voidedObs=obsService.voidObs(obs,reason);
  assertTrue(voidedObs.equals(obs));
  assertTrue(reason.equals(obs.getVoidReason()));
  Obs voidedObsFetched=obsService.getObs(obs.getObsId());
  assertTrue(voidedObsFetched.isVoided());
  assertTrue(reason.equals(voidedObsFetched.getVoidReason()));
  assertTrue(voidedObs.getObsId().equals(obs.getObsId()));
  assertTrue(voidedObs.getObsId().equals(voidedObs.getObsId()));
}
