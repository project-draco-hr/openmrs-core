{
  try {
    File file=getComplexDataFile(obs);
    String[] names=obs.getValueComplex().split("\\|");
    String originalFilename=names[0];
    if ("download".equals(view)) {
      originalFilename=originalFilename.replace(",","").replace(" ","");
    }
    if (file.exists()) {
      FileInputStream fileInputStream=new FileInputStream(file);
      obs.setComplexData(new ComplexData(originalFilename,fileInputStream));
    }
 else {
      log.error("Unable to find file associated with complex obs " + obs.getId());
    }
  }
 catch (  Exception e) {
    throw new APIException("An error occurred while trying to get binary complex obs.",e);
  }
  return obs;
}
