{
  HttpSession httpSession=request.getSession();
  String view=getFormView();
  if (Context.isAuthenticated()) {
    String[] patientList=request.getParameterValues("patientId");
    PatientService ps=Context.getPatientService();
    for (    String o : patientList) {
      ps.voidPatient(ps.getPatient(Integer.valueOf(o)),"");
    }
    httpSession.setAttribute(WebConstants.OPENMRS_MSG_ATTR,"Patient.voided");
    view=getSuccessView();
  }
  return new ModelAndView(new RedirectView(view));
}
