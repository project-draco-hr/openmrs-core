{
  ConceptService cs=Context.getConceptService();
  if (conceptId != null) {
    c=cs.getConcept(conceptId);
  }
 else   if (conceptName != null) {
    c=cs.getConceptByName(conceptName);
  }
  if (c == null) {
    if (conceptId != null && conceptId > 0)     log.warn("ConceptTag is unable to find a concept with conceptId '" + conceptId + "'");
    if (conceptName != null)     log.warn("ConceptTag is unable to find a concept with conceptName '" + conceptName + "'");
    return SKIP_BODY;
  }
  pageContext.setAttribute(var,c);
  log.debug("Found concept with id " + conceptId + ", set to variable: "+ var);
  Locale loc=Context.getLocale();
  if (locale != null && !locale.equals("")) {
    Locale[] locales=Locale.getAvailableLocales();
    for (int i=0; i < locales.length; i++) {
      if (locale.equals(locales[i].toString())) {
        loc=locales[i];
        break;
      }
    }
  }
  if (nameVar != null) {
    ConceptName cName=c.getName(loc);
    pageContext.setAttribute(nameVar,cName);
    log.debug("Retrieved name " + cName.getName() + ", set to variable: "+ nameVar);
  }
  if (numericVar != null) {
    pageContext.setAttribute(numericVar,cs.getConceptNumeric(conceptId));
  }
  if (c.isSet() && setMemberVar != null) {
    pageContext.setAttribute(setMemberVar,Context.getConceptService().getConceptsInSet(c));
  }
  return EVAL_BODY_BUFFERED;
}
