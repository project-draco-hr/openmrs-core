{
  DateFormat ymd=new SimpleDateFormat("yyyy-MM-dd");
  Cohort cohort=service.getPatientsHavingDateObs(18,ymd.parse("2006-12-31"),ymd.parse("2007-01-03"));
  Assert.assertEquals(0,cohort.size());
{
    Obs obs=new Obs();
    obs.setPerson(new Person(8));
    obs.setConcept(Context.getConceptService().getConcept(18));
    obs.setObsDatetime(ymd.parse("2007-01-01"));
    obs.setValueBoolean(true);
    obs.setLocation(new Location(1));
    obs.setValueDatetime(ymd.parse("2007-01-01"));
    Context.getObsService().saveObs(obs,null);
  }
{
    Obs obs=new Obs();
    obs.setPerson(new Person(7));
    obs.setConcept(Context.getConceptService().getConcept(18));
    obs.setObsDatetime(ymd.parse("2007-01-03"));
    obs.setValueBoolean(true);
    obs.setLocation(new Location(1));
    obs.setValueDatetime(ymd.parse("2007-01-03"));
    Context.getObsService().saveObs(obs,null);
  }
  cohort=service.getPatientsHavingDateObs(18,ymd.parse("2007-01-01"),ymd.parse("2007-01-03"));
  Assert.assertEquals(2,cohort.size());
  Assert.assertTrue(cohort.contains(8));
  Assert.assertTrue(cohort.contains(7));
}
