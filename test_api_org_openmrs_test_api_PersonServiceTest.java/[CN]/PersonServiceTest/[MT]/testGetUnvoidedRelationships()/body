{
  executeDataSet(CREATE_PATIENT_XML);
  executeDataSet(CREATE_RELATIONSHIP_XML);
  Patient patient=new Patient();
  PersonName pName=new PersonName();
  pName.setGivenName("Tom");
  pName.setMiddleName("E.");
  pName.setFamilyName("Patient");
  patient.addName(pName);
  PersonAddress pAddress=new PersonAddress();
  pAddress.setAddress1("123 My street");
  pAddress.setAddress2("Apt 402");
  pAddress.setCityVillage("Anywhere city");
  pAddress.setCountry("Some Country");
  Set<PersonAddress> pAddressList=patient.getAddresses();
  pAddressList.add(pAddress);
  patient.setAddresses(pAddressList);
  patient.addAddress(pAddress);
  patient.setDeathDate(new Date());
  patient.setBirthdate(new Date());
  patient.setBirthdateEstimated(true);
  patient.setGender("male");
  List<PatientIdentifierType> patientIdTypes=ps.getAllPatientIdentifierTypes();
  assertNotNull(patientIdTypes);
  PatientIdentifier patientIdentifier=new PatientIdentifier();
  patientIdentifier.setIdentifier("123-0");
  patientIdentifier.setIdentifierType(patientIdTypes.get(0));
  Set<PatientIdentifier> patientIdentifiers=new TreeSet<PatientIdentifier>();
  patientIdentifiers.add(patientIdentifier);
  patient.setIdentifiers(patientIdentifiers);
  ps.savePatient(patient);
  Relationship sibling=new Relationship();
  sibling.setPersonA(ps.getPatient(2));
  sibling.setPersonB(patient);
  sibling.setRelationshipType(personService.getRelationshipType(4));
  personService.saveRelationship(sibling);
  Relationship doctor=new Relationship();
  doctor.setPersonB(ps.getPatient(2));
  doctor.setPersonA(patient);
  doctor.setRelationshipType(personService.getRelationshipType(3));
  personService.saveRelationship(doctor);
  Person p=personService.getPerson(2);
  List<Relationship> aRels=personService.getRelationshipsByPerson(p);
  List<Relationship> bRels=personService.getRelationshipsByPerson(patient);
  List<RelationshipType> rTmp=personService.getAllRelationshipTypes();
  assertNotNull(rTmp);
  RelationshipType rTypeTmp=personService.getRelationshipTypeByName("Doctor/Patient");
  assertNotNull(rTypeTmp);
  rTypeTmp=personService.getRelationshipTypeByName("booya");
  assertNull(rTypeTmp);
  List<Relationship> allRels=personService.getAllRelationships();
  for (  Relationship r : allRels) {
    personService.voidRelationship(r,"Because of a JUnit test.");
  }
  List<Relationship> updatedARels=personService.getRelationshipsByPerson(p);
  List<Relationship> updatedBRels=personService.getRelationshipsByPerson(patient);
  assertEquals(updatedARels,updatedBRels);
}
