{
  int index=0, nindex=0, endindex=0, startindex=0;
  String tempstr, variable;
  StringBuilder outStr=new StringBuilder("");
  String inStr=userVarMap.get("ActionStr");
  tempstr=inStr;
  index=tempstr.indexOf("||",nindex);
  if (index != -1) {
    if (index == 0) {
      nindex=tempstr.indexOf("||",index + 1);
      startindex=index + 2;
      endindex=nindex;
      variable=inStr.substring(startindex,endindex).trim();
      outStr.append(userVarMap.get(variable));
      index=tempstr.indexOf("||",nindex + 2);
    }
    while (index > 0) {
      if (nindex == 0) {
        startindex=nindex;
        endindex=index;
        outStr.append(tempstr.substring(startindex,endindex));
      }
 else {
        startindex=nindex + 2;
        endindex=index;
        outStr.append(tempstr.substring(startindex,endindex));
      }
      nindex=tempstr.indexOf("||",index + 2);
      startindex=index + 2;
      endindex=nindex;
      variable=inStr.substring(startindex,endindex).trim();
      outStr.append(userVarMap.get(variable));
      index=tempstr.indexOf("||",nindex + 2);
    }
    outStr.append(tempstr.substring(nindex + 2));
  }
 else {
    outStr.append(tempstr);
  }
  return outStr.toString();
}
