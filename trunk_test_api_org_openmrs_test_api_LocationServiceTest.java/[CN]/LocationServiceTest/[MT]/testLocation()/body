{
  LocationService locationService=Context.getLocationService();
  Location location=new Location();
  location.setName("testing");
  location.setDescription("desc");
  location.setAddress1("123");
  location.setAddress1("456");
  location.setCityVillage("city");
  location.setStateProvince("state");
  location.setCountry("country");
  location.setPostalCode("post");
  location.setLatitude("lat");
  location.setLongitude("lon");
  locationService.saveLocation(location);
  Location newLocation=locationService.getLocation(location.getLocationId());
  assertNotNull(newLocation);
  List<Location> locations=locationService.getAllLocations();
  assertNotNull(locations);
  boolean found=false;
  for (Iterator<Location> i=locations.iterator(); i.hasNext(); ) {
    Location location2=i.next();
    assertNotNull(location);
    assertTrue(location.equals(location2) == (location.getLocationId().equals(location2.getLocationId())));
    if (location.equals(location2))     found=true;
  }
  assertTrue(found);
  newLocation.setName("another test");
  locationService.saveLocation(newLocation);
  Location newerLocation=locationService.getLocation(newLocation.getLocationId());
  assertTrue(newerLocation.getName().equals(newLocation.getName()));
  locationService.purgeLocation(newLocation);
  assertNull(locationService.getLocation(newLocation.getLocationId()));
}
