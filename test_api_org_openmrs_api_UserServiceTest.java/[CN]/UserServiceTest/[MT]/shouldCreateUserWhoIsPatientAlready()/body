{
  initializeInMemoryDatabase();
  authenticate();
  assertTrue("The context needs to be correctly authenticated to by a user",Context.isAuthenticated());
  executeDataSet(XML_FILENAME);
  UserService userService=Context.getUserService();
  User preliminaryFetchedUser=userService.getUser(2);
  assertNull(preliminaryFetchedUser);
  Person personToMakeUser=Context.getPersonService().getPerson(2);
  Context.clearSession();
  User user=new User(personToMakeUser);
  user.setUserId(2);
  user.setUsername("bwolfe");
  user.setSystemId("asdf");
  user.addRole(new Role("Some Role","This is a test role"));
  assertTrue(user.getUsername().equals("bwolfe"));
  assertTrue(user.hasRole("Some Role"));
  userService.saveUser(user,null);
  shouldCreateUserWhoIsPatientAlreadyTestWasRun=true;
  System.out.println("Just set the boolean var");
}
