{
  if (!Context.getUserContext().hasPrivilege(OpenmrsConstants.PRIV_VIEW_PROGRAMS))   throw new APIAuthenticationException("Privilege required: " + OpenmrsConstants.PRIV_VIEW_PROGRAMS);
  PatientState ret=null;
  for (  PatientState state : patientProgram.getStates()) {
    if (state.getState().getProgramWorkflow().equals(workflow))     if (ret == null || ret.getStartDate() == null || (state.getStartDate() != null && state.getStartDate().compareTo(ret.getStartDate()) > 0))     ret=state;
  }
  return ret;
}
