{
  Criteria crit=sessionFactory.getCurrentSession().createCriteria(PatientProgram.class);
  if (patient != null) {
    crit.add(Expression.eq("patient",patient));
  }
  if (program != null) {
    crit.add(Expression.eq("program",program));
  }
  if (minEnrollmentDate != null) {
    crit.add(Expression.ge("dateEnrolled",minEnrollmentDate));
  }
  if (maxEnrollmentDate != null) {
    crit.add(Expression.le("dateEnrolled",maxEnrollmentDate));
  }
  if (minCompletionDate != null) {
    crit.add(Expression.or(Expression.isNull("dateCompleted"),Expression.ge("dateCompleted",minCompletionDate)));
  }
  if (maxCompletionDate != null) {
    crit.add(Expression.le("dateCompleted",maxCompletionDate));
  }
  if (!includeVoided) {
    crit.add(Expression.eq("voided",false));
  }
  return crit.list();
}
