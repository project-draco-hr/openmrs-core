{
  Context.authenticate("USER-1","test");
  Patient patient=new Patient();
  PersonName pName=new PersonName();
  pName.setGivenName("Tom");
  pName.setMiddleName("E.");
  pName.setFamilyName("Patient");
  patient.addName(pName);
  PersonAddress pAddress=new PersonAddress();
  pAddress.setAddress1("123 My street");
  pAddress.setAddress2("Apt 402");
  pAddress.setCityVillage("Anywhere city");
  pAddress.setCountry("Some Country");
  Set<PersonAddress> pAddressList=patient.getAddresses();
  pAddressList.add(pAddress);
  patient.setAddresses(pAddressList);
  patient.addAddress(pAddress);
  patient.setTribe(ps.getTribes().get(0));
  patient.setDeathDate(new Date());
  patient.setBirthdate(new Date());
  patient.setBirthdateEstimated(true);
  patient.setGender("male");
  List<PatientIdentifierType> patientIdTypes=ps.getPatientIdentifierTypes();
  assertNotNull(patientIdTypes);
  PatientIdentifier patientIdentifier=new PatientIdentifier();
  patientIdentifier.setIdentifier("ident");
  patientIdentifier.setIdentifierType(patientIdTypes.get(0));
  patientIdentifier.setLocation(encounterService.getLocations().get(0));
  Set<PatientIdentifier> patientIdentifiers=new HashSet<PatientIdentifier>();
  patientIdentifiers.add(patientIdentifier);
  patient.setIdentifiers(patientIdentifiers);
  ps.createPatient(patient);
  createdPatient=ps.getPatient(patient.getPatientId());
  assertNotNull(createdPatient);
  assertNotNull(createdPatient.getPatientId());
  Patient createdPatientById=ps.getPatient(createdPatient.getPatientId());
  assertNotNull(createdPatientById);
}
