{
  log.debug("Started with: [" + personId + "] ["+ conceptId+ "] ["+ encounterId+ "]");
  Vector<ObsListItem> ret=new Vector<ObsListItem>();
  Integer pId=null;
  try {
    pId=Integer.valueOf(personId);
  }
 catch (  NumberFormatException nfe) {
    pId=null;
  }
  Integer eId=null;
  try {
    eId=Integer.valueOf(encounterId);
  }
 catch (  NumberFormatException nfe) {
    eId=null;
  }
  Person p=null;
  Concept c=null;
  Encounter e=null;
  if (pId != null) {
    p=Context.getPersonService().getPerson(pId);
  }
  if (conceptId != null) {
    c=Context.getConceptService().getConcept(conceptId);
  }
  if (eId != null) {
    e=Context.getEncounterService().getEncounter(eId);
  }
  Collection<Obs> obss=null;
  if (p != null && c != null) {
    log.debug("Getting obss with patient and concept");
    obss=Context.getObsService().getObservationsByPersonAndConcept(p,c);
  }
 else   if (e != null) {
    log.debug("Getting obss by encounter");
    obss=e.getAllObs();
  }
 else   if (p != null) {
    log.debug("Getting obss with just patient");
    obss=Context.getObsService().getObservationsByPerson(p);
  }
  if (obss != null) {
    for (    Obs obs : obss) {
      ObsListItem newItem=new ObsListItem(obs,Context.getLocale());
      ret.add(newItem);
    }
    log.debug("obss was size " + obss.size());
  }
  return ret;
}
