{
  Location location=null;
  if (Context.isAuthenticated()) {
    LocationService ls=Context.getLocationService();
    String locationId=request.getParameter("locationId");
    if (locationId != null) {
      location=ls.getLocation(Integer.valueOf(locationId));
    }
  }
  if (location == null) {
    location=new Location();
  }
  return location;
}
