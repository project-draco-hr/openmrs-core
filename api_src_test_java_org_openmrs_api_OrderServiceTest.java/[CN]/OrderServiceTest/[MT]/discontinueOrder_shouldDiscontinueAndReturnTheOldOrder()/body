{
  int originalCount=service.getOrders(Order.class,null,null,null,null,null,null,null).size();
  Order order=service.getOrder(3);
  Assert.assertFalse(order.getDiscontinued());
  Assert.assertNull(order.getDiscontinuedDate());
  Assert.assertNull(order.getDiscontinuedBy());
  Assert.assertNull(order.getDiscontinuedReason());
  Order returnedOrder=service.discontinueOrder(order,"Testing");
  Assert.assertEquals(order,returnedOrder);
  Assert.assertTrue(order.getDiscontinued());
  Assert.assertEquals("Testing",returnedOrder.getDiscontinuedReason());
  Assert.assertNotNull(returnedOrder.getDiscontinuedDate());
  Assert.assertNotNull(returnedOrder.getDiscontinuedBy());
  Assert.assertEquals(originalCount + 1,service.getOrders(Order.class,null,null,null,null,null,null,null).size());
  Order discontinueOrder=null;
  for (  Order o : service.getOrders(Order.class,null,null,null,null,null,null,null)) {
    if (OpenmrsUtil.nullSafeEquals(o.getPreviousOrderNumber(),order.getOrderNumber()))     discontinueOrder=o;
  }
  Assert.assertNotNull(discontinueOrder);
  Assert.assertEquals(OrderAction.DISCONTINUE,discontinueOrder.getOrderAction());
}
