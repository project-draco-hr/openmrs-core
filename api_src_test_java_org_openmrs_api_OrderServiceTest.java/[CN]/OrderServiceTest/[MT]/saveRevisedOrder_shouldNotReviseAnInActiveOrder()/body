{
  executeDataSet("org/openmrs/api/include/OrderServiceTest-reviseInActiveOrders.xml");
  DrugOrder order=(DrugOrder)orderService.getOrder(6);
  DrugOrder orderWithRevision=(DrugOrder)order.cloneForRevision();
  orderWithRevision.setDose((double)200);
  orderWithRevision.setDoseUnits(conceptService.getConcept(51));
  orderWithRevision.setFrequency(orderService.getOrderFrequency(2));
  orderWithRevision.setAsNeeded(false);
  orderWithRevision.setDosingType(DrugOrder.DosingType.FREE_TEXT);
  orderWithRevision.setDateCreated(new Date());
  orderWithRevision.setDuration((double)10);
  orderWithRevision.setAutoExpireDate(dateAfterDays(10));
  expectedEx.expect(APIException.class);
  expectedEx.expectMessage("Cannot revise an inactive order.");
  orderService.saveRevisedOrder(orderWithRevision);
}
