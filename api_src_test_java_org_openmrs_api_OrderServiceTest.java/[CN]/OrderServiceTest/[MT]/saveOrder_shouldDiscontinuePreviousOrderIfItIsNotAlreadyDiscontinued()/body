{
  Order order=new Order();
  order.setAction(Order.Action.DISCONTINUE);
  order.setOrderReasonNonCoded("Discontinue this");
  order.setEncounter(encounterService.getEncounter(5));
  order.setPatient(Context.getPatientService().getPatient(7));
  order.setOrderer(Context.getProviderService().getProvider(1));
  order.setConcept(Context.getConceptService().getConcept(88));
  order.setCareSetting(orderService.getCareSetting(1));
  order.setEncounter(encounterService.getEncounter(3));
  order.setOrderType(orderService.getOrderType(1));
  order.setStartDate(new Date());
  Order previousOrder=orderService.getOrder(111);
  assertTrue(OrderUtilTest.isActiveOrder(previousOrder,null));
  order.setPreviousOrder(previousOrder);
  orderService.saveOrder(order,null);
  Assert.assertNotNull("previous order should be discontinued",previousOrder.getDateStopped());
}
