{
  String portletUrl="test.portlet";
  String moduleId="module.id";
  mockStatic(ModuleFactory.class);
  when(ModuleFactory.getModuleById(moduleId)).thenReturn(new Module(moduleId));
  PortletTag portlet=new PortletTag();
  String result=portlet.generatePortletUrl(portletUrl,moduleId);
  assertEquals("/module/" + moduleId.replace('.','/') + "/portlets/"+ portletUrl,result);
}
