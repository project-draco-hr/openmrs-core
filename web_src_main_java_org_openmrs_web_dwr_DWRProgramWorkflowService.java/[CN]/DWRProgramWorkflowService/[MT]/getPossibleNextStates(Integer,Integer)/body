{
  Vector<ListItem> ret=new Vector<ListItem>();
  PatientProgram pp=Context.getProgramWorkflowService().getPatientProgram(patientProgramId);
  ProgramWorkflow pw=pp.getProgram().getWorkflow(programWorkflowId);
  List<ProgramWorkflowState> states=pw.getPossibleNextStates(pp);
  for (  ProgramWorkflowState state : states) {
    ListItem li=new ListItem();
    li.setId(state.getProgramWorkflowStateId());
    li.setName(state.getConcept().getName(Context.getLocale(),false).getName());
    if (!state.isRetired() && !state.getConcept().isRetired()) {
      ret.add(li);
    }
  }
  return ret;
}
