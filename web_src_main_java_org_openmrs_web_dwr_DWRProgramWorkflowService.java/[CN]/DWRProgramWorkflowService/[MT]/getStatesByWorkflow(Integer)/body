{
  log.debug("In getStatesByWorkflow with workflowID of " + programWorkflowId);
  Vector<ListItem> ret=new Vector<ListItem>();
  ProgramWorkflow workflow=Context.getProgramWorkflowService().getWorkflow(programWorkflowId);
  if (workflow != null) {
    Set<ProgramWorkflowState> states=workflow.getSortedStates();
    if (states != null) {
      log.debug("Got states of size " + states.size());
      for (      ProgramWorkflowState state : states) {
        ListItem li=new ListItem();
        li.setId(state.getProgramWorkflowStateId());
        try {
          li.setName(state.getConcept().getName(Context.getLocale(),false).getName());
        }
 catch (        NullPointerException ex) {
        }
        ret.add(li);
      }
    }
 else {
      log.debug("States was null - there seem to be no states associated with this workflow");
    }
  }
 else {
    log.debug("Workflow was null, cannot get states");
  }
  if (ret != null)   log.debug("Returning ret of size " + ret.size());
 else   log.debug("Returning null ret");
  return ret;
}
