{
  log.debug("Update alert " + alert);
  if (alert.getCreator() == null)   alert.setCreator(context.getAuthenticatedUser());
  if (alert.getDateCreated() == null)   alert.setDateCreated(new Date());
  alert.setChangedBy(context.getAuthenticatedUser());
  alert.setDateChanged(new Date());
  if (alert.getRecipients() != null) {
    for (    AlertRecipient recipient : alert.getRecipients()) {
      if (!alert.equals(recipient.getAlert()))       recipient.setAlert(alert);
    }
  }
  dao().updateAlert(alert);
}
