{
  Person person=null;
  if (Context.isAuthenticated()) {
    UserService us=Context.getUserService();
    PersonService ps=Context.getPersonService();
    String personId=request.getParameter("personId");
    String patientId=request.getParameter("patientId");
    String userId=request.getParameter("userId");
    if (personId != null)     person=ps.getPerson(Integer.valueOf(personId));
 else     if (patientId != null) {
    }
 else     if (userId != null) {
      User user=us.getUser(Integer.valueOf(userId));
      person=user;
    }
  }
  if (person == null)   person=new Person();
  return person;
}
