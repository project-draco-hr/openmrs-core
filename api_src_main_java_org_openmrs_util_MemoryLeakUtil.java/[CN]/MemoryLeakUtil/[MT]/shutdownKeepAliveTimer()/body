{
  try {
    Class<?> httpClientClass=Class.forName("sun.net.www.http.HttpClient");
    Class<?> keepAliveCacheClass=Class.forName("sun.net.www.http.KeepAliveCache");
    final Field kac=httpClientClass.getDeclaredField("kac");
    kac.setAccessible(true);
    final Field keepAliveTimer=keepAliveCacheClass.getDeclaredField("keepAliveTimer");
    keepAliveTimer.setAccessible(true);
    final Thread thread=(Thread)keepAliveTimer.get(kac.get(null));
    if (thread.getContextClassLoader() == OpenmrsClassLoader.getInstance()) {
      thread.setContextClassLoader(ClassLoader.getSystemClassLoader());
    }
  }
 catch (  final Exception e) {
    log.error(e.getMessage(),e);
  }
}
