{
  if (startNow != null && startNow && visit.getStartDatetime() == null) {
    visit.setStartDatetime(new Date());
  }
  if (visit.getVisitId() != null) {
    model.addAttribute("canPurgeVisit",Context.getEncounterService().getEncountersByVisit(visit,true).size() == 0);
  }
  addEncounterAndObservationCounts(visit,null,model);
  return VISIT_FORM;
}
