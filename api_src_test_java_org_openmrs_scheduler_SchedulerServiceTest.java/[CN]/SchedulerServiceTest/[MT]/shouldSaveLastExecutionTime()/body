{
  final String NAME="Session Task";
  SchedulerService service=Context.getSchedulerService();
  TaskDefinition td=new TaskDefinition();
  td.setName(NAME);
  td.setStartOnStartup(false);
  td.setTaskClass(SessionTask.class.getName());
  td.setStartTime(null);
  td.setRepeatInterval(new Long(0));
synchronized (SAVE_TASK_LOCK) {
    service.saveTask(td);
    service.scheduleTask(td);
  }
  td=service.getTaskByName(NAME);
  for (int x=0; x < 30 && (actualExecutionTime == null || td.getLastExecutionTime() == null); x++)   Thread.sleep(200);
  Assert.assertNotNull("The actualExecutionTime variable is null, so either the SessionTask.execute method hasn't finished or didn't get run",actualExecutionTime);
  assertEquals("Last execution time in seconds is wrong",actualExecutionTime.longValue() / 1000,td.getLastExecutionTime().getTime() / 1000,1);
}
