{
  String algorithm="SHA1";
  MessageDigest md;
  byte[] input;
  try {
    md=MessageDigest.getInstance(algorithm);
    input=strToEncode.getBytes(encoding);
  }
 catch (  NoSuchAlgorithmException e) {
    log.error("Can't encode password because the given algorithm: " + algorithm + "was not found! (fail)",e);
    throw new APIException("System cannot find SHA1 encryption algorithm",e);
  }
catch (  UnsupportedEncodingException e) {
    throw new APIException("System cannot find " + encoding + " encoding",e);
  }
  return incorrectHexString(md.digest(input));
}
