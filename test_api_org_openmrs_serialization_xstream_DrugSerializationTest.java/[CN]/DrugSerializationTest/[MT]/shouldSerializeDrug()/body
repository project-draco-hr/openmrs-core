{
  initializeInMemoryDatabase();
  executeDataSet("org/openmrs/serialization/include/DrugSerializationTest.xml");
  authenticate();
  Drug drug=Context.getConceptService().getDrug(2);
  SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z");
  String xmlOutput=Context.getSerializationService().serialize(drug,XStreamSerializer.class);
  XMLAssert.assertXpathEvaluatesTo("3cfcf118-931c-46f7-8ff6-7b876f0d4202","/drug/@uuid",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("2","/drug/drugId",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("false","/drug/@retired",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("Triomune-30","/drug/name",xmlOutput);
  XMLAssert.assertXpathExists("/drug/creator",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo(sdf.format(drug.getDateCreated()),"/drug/dateCreated",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("true","/drug/combination",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("3","/drug/dosageForm/conceptId",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("1.0","/drug/doseStrength",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("5","/drug/route/conceptId",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("tab(s)","/drug/units",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("4","/drug/concept/conceptId",xmlOutput);
}
