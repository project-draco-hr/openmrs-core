{
  PatientProgram program=Context.getProgramWorkflowService().getPatientProgram(1);
  Set<PatientState> states=program.getStates();
  Assert.assertNotNull(states);
  PatientState patientSate=states.iterator().next();
  Assert.assertNotNull(patientSate);
  PatientState duplicate=patientSate.copy();
  states.add(duplicate);
  BindException errors=new BindException(program,"");
  new PatientProgramValidator().validate(program,errors);
  Assert.assertTrue(errors.hasErrors());
}
