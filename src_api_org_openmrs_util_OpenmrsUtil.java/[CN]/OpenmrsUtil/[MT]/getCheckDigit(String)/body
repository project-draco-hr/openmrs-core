{
  PatientService ps=Context.getPatientService();
  IdentifierValidator piv=ps.getDefaultIdentifierValidator();
  String withCheckDigit=piv.getValidIdentifier(idWithoutCheckdigit);
  char checkDigitChar=withCheckDigit.charAt(withCheckDigit.length() - 1);
  if (Character.isDigit(checkDigitChar))   return Integer.parseInt("" + checkDigitChar);
 else {
switch (checkDigitChar) {
case 'A':
case 'a':
      return 0;
case 'B':
case 'b':
    return 1;
case 'C':
case 'c':
  return 2;
case 'D':
case 'd':
return 3;
case 'E':
case 'e':
return 4;
case 'F':
case 'f':
return 5;
case 'G':
case 'g':
return 6;
case 'H':
case 'h':
return 7;
case 'I':
case 'i':
return 8;
case 'J':
case 'j':
return 9;
default :
return 10;
}
}
}
