{
  List<Object> ret=new ArrayList<Object>();
  for (  Object o : list) {
    if (o instanceof List)     ret.add(cloneCompositionHelper((List)o,history,evalContext));
 else     if (o instanceof Integer)     ret.add(history.ensureCachedFilter((Integer)o - 1));
 else     if (o instanceof BooleanOperator)     ret.add(o);
 else     if (o instanceof PatientFilter)     ret.add(o);
 else     if (o instanceof PatientSearch)     ret.add(OpenmrsUtil.toPatientFilter((PatientSearch)o,history,evalContext));
 else     throw new RuntimeException("Programming Error: forgot to handle: " + o.getClass());
  }
  return ret;
}
