{
  if (Context.isAuthenticated()) {
    setupModelForModule(model);
    String propertyPrefix=(String)model.get("propertyPrefix");
    if (propertyPrefix == null) {
      propertyPrefix="";
      model.put("propertyPrefix",propertyPrefix);
    }
    String excludePrefix=(String)model.get("excludePrefix");
    if ("".equals(excludePrefix)) {
      excludePrefix=null;
      model.put("excludePrefix",excludePrefix);
    }
    String[] prefixes=new String[0];
    if (excludePrefix != null) {
      prefixes=excludePrefix.split(";");
    }
    List<GlobalProperty> properties=new ArrayList<GlobalProperty>();
    for (    GlobalProperty p : Context.getAdministrationService().getAllGlobalProperties()) {
      if (p.getProperty().startsWith(propertyPrefix)) {
        boolean found=false;
        for (        String prefix : prefixes) {
          if (p.getProperty().startsWith(prefix)) {
            found=true;
            break;
          }
        }
        if (!found) {
          properties.add(p);
        }
      }
    }
    model.put("properties",properties);
    boolean showHeader=true;
    if ("false".equals(model.get("showHeader")))     showHeader=false;
    model.put("showHeader",showHeader);
  }
}
