{
  Vector<Object> personList=new Vector<Object>();
  Integer userId=Context.getAuthenticatedUser().getUserId();
  log.info(userId + "|" + name+ "|"+ birthdate+ "|"+ age+ "|"+ gender);
  PersonService ps=Context.getPersonService();
  Integer d=null;
  birthdate=birthdate.trim();
  age=age.trim();
  if (birthdate.length() > 0) {
    DateFormat format=Context.getDateFormat();
    Date dateObject=null;
    try {
      dateObject=format.parse(birthdate);
    }
 catch (    Exception e) {
    }
    if (dateObject != null) {
      Calendar c=Calendar.getInstance();
      c.setTime(dateObject);
      d=c.get(Calendar.YEAR);
    }
  }
 else   if (age.length() > 0) {
    Calendar c=Calendar.getInstance();
    c.setTime(new Date());
    d=c.get(Calendar.YEAR);
    d=d - Integer.parseInt(age);
  }
  if (gender.length() < 1)   gender=null;
  Set<Person> persons=ps.getSimilarPeople(name,d,gender);
  personList=new Vector<Object>(persons.size());
  for (  Person p : persons) {
    personList.add(PersonListItem.createBestMatch(p));
  }
  return personList;
}
