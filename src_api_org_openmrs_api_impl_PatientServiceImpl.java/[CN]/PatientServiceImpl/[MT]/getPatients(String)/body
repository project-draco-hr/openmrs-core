{
  List<Patient> patients=new Vector<Patient>();
  String minSearchCharactersStr=Context.getAdministrationService().getGlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_MIN_SEARCH_CHARACTERS);
  int minSearchCharacters;
  try {
    minSearchCharacters=Integer.valueOf(minSearchCharactersStr);
  }
 catch (  NumberFormatException e) {
    minSearchCharacters=3;
  }
  if (query.length() < minSearchCharacters)   return patients;
  if (query.matches(".*\\d+.*")) {
    log.debug("[Identifier search] Query: " + query);
    return getPatients(null,query,null);
  }
 else {
    return getPatients(query,null,null);
  }
}
