{
  Context.getPersonService().setCollectionProperties(patient);
  if (patient.getCreator() == null)   patient.setCreator(Context.getAuthenticatedUser());
  if (patient.getDateCreated() == null)   patient.setDateCreated(new Date());
  if (patient.getPatientId() != null) {
    patient.setChangedBy(Context.getAuthenticatedUser());
    patient.setDateChanged(new Date());
  }
  if (patient.getIdentifiers() != null) {
    for (    PatientIdentifier pIdentifier : patient.getIdentifiers()) {
      if (pIdentifier.getDateCreated() == null)       pIdentifier.setDateCreated(new Date());
      if (pIdentifier.getCreator() == null)       pIdentifier.setCreator(Context.getAuthenticatedUser());
      if (pIdentifier.getPatient() == null)       pIdentifier.setPatient(patient);
      if (pIdentifier.isVoided()) {
        if (pIdentifier.getVoidedBy() == null)         pIdentifier.setVoidedBy(Context.getAuthenticatedUser());
        if (pIdentifier.getDateVoided() == null)         pIdentifier.setDateVoided(new Date());
      }
    }
  }
}
