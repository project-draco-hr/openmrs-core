{
  String simpleName=real.getSimpleName();
  simpleName=Introspector.decapitalize(simpleName);
  Class type=value.getClass();
  if (type != field || !node.getName().equals(simpleName)) {
    String realClassName=real.getName();
    if (value instanceof PersistentCollection)     realClassName=getHibernateInstanceClass(type.getName());
    if (!realClassName.contains("CGLIB")) {
      if (type != field)       return realClassName;
    }
 else {
      for (      String objectName : new String[]{"User","Patient","ComplexObs","ConceptNumeric"}) {
        String className="org.openmrs." + objectName;
        if (realClassName.startsWith(className)) {
          if (!field.getName().equals(className))           return className;
        }
      }
      return realClassName.substring(0,realClassName.indexOf("$$EnhancerByCGLIB"));
    }
  }
  return null;
}
