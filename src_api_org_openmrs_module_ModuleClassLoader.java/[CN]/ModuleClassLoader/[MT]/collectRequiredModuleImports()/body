{
  Map<String,Module> publicImportsMap=new WeakHashMap<String,Module>();
  for (  String moduleId : ModuleConstants.REQUIRED_MODULES.keySet()) {
    publicImportsMap.put(moduleId,ModuleFactory.getModuleById(moduleId));
  }
  for (  String requiredPackage : getModule().getRequiredModules()) {
    Module requiredModule=ModuleFactory.getModuleByPackage(requiredPackage);
    if (ModuleFactory.isModuleStarted(requiredModule)) {
      publicImportsMap.put(requiredModule.getModuleId(),requiredModule);
    }
  }
  requiredModules=(Module[])publicImportsMap.values().toArray(new Module[publicImportsMap.size()]);
}
