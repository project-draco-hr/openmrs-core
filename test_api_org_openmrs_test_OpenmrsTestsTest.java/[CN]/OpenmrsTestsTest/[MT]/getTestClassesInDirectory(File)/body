{
  List<Class<TestCase>> currentDirTestClasses=new ArrayList<Class<TestCase>>();
  for (  File currentFile : directory.listFiles()) {
    if (currentFile.isDirectory()) {
      currentDirTestClasses.addAll(getTestClassesInDirectory(currentFile));
    }
    if (currentFile.getName().endsWith("class")) {
      String className=currentFile.getAbsolutePath().replace(".class","");
      className=className.replace("/",".");
      className=className.substring(className.indexOf("org.openmrs."));
      try {
        Class<?> currentClass=classLoader.loadClass(className);
        if (TestCase.class.isAssignableFrom(currentClass)) {
          currentDirTestClasses.add((Class<TestCase>)currentClass);
        }
      }
 catch (      ClassNotFoundException e) {
        System.out.println("Unable to load class: " + className + " error: "+ e.getMessage());
      }
    }
  }
  return currentDirTestClasses;
}
