{
  ReportObjectWrapper wrappedReportObject;
  if (reportObj.getReportObjectId() == null) {
    wrappedReportObject=new ReportObjectWrapper(reportObj);
    wrappedReportObject.setCreator(Context.getAuthenticatedUser());
    wrappedReportObject.setDateCreated(new Date());
  }
 else {
    wrappedReportObject=(ReportObjectWrapper)sessionFactory.getCurrentSession().get(ReportObjectWrapper.class,reportObj.getReportObjectId());
    wrappedReportObject.setReportObject(reportObj);
    wrappedReportObject.setChangedBy(Context.getAuthenticatedUser());
    wrappedReportObject.setDateChanged(new Date());
  }
  sessionFactory.getCurrentSession().saveOrUpdate(wrappedReportObject);
  reportObj.setReportObjectId(wrappedReportObject.getReportObjectId());
  return reportObj;
}
