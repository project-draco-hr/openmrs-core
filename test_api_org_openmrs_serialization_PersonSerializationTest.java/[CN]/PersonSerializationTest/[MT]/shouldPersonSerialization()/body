{
  initializeInMemoryDatabase();
  executeDataSet("org/openmrs/serialization/include/PersonSerializationTest.xml");
  authenticate();
  Person person=Context.getPersonService().getPerson(1000);
  SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z");
  String xmlOutput=Context.getSerializationService().serialize(person,XStreamSerializer.class);
  XMLAssert.assertXpathEvaluatesTo("04079813-4c9d-4f9d-b676-4c0502a5c1c3","/person/@uuid",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("1000","/person/personId",xmlOutput);
  XMLAssert.assertXpathExists("/person/addresses/personAddress[personAddressId=1]",xmlOutput);
  XMLAssert.assertXpathExists("/person/names/personName[personNameId=2]",xmlOutput);
  XMLAssert.assertXpathExists("/person/attributes/personAttribute[personAttributeId=1]",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("M","/person/gender",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo(sdf.format(person.getBirthdate()),"/person/birthdate",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("false","/person/birthdateEstimated",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("true","/person/dead",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo(sdf.format(person.getDeathDate()),"/person/deathDate",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("1088","/person/causeOfDeath/conceptId",xmlOutput);
  XMLAssert.assertXpathExists("/person/personCreator",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo(sdf.format(person.getPersonDateCreated()),"/person/personDateCreated",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("true","/person/personVoided",xmlOutput);
  XMLAssert.assertXpathExists("/person/personVoidedBy",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo(sdf.format(person.getPersonDateVoided()),"/person/personDateVoided",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("test purpose","/person/personVoidReason",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("false","/person/isPatient",xmlOutput);
  XMLAssert.assertXpathEvaluatesTo("false","/person/isUser",xmlOutput);
}
