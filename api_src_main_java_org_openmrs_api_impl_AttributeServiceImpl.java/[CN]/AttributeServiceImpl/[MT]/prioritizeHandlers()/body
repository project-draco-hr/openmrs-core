{
  if (prioritizedHandlerClasses == null) {
    prioritizedHandlerClasses=new HashMap<String,Class<? extends AttributeHandler<?>>>();
    for (    AttributeHandler<?> handler : allRegisteredHandlers) {
      Class<? extends AttributeHandler> clazz=handler.getClass();
      if (!prioritizedHandlerClasses.containsKey(handler.getDatatypeHandled())) {
        prioritizedHandlerClasses.put(handler.getDatatypeHandled(),(Class<? extends AttributeHandler<?>>)clazz);
      }
 else {
        int candidateOrder=getOrder((Class<? extends AttributeHandler<?>>)clazz);
        int existingOrder=getOrder(prioritizedHandlerClasses.get(handler.getDatatypeHandled()));
        if (candidateOrder < existingOrder)         prioritizedHandlerClasses.put(handler.getDatatypeHandled(),(Class<? extends AttributeHandler<?>>)clazz);
      }
    }
  }
}
