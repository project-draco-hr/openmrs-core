{
  HttpSession httpSession=request.getSession();
  Context context=(Context)httpSession.getAttribute(WebConstants.OPENMRS_CONTEXT_HTTPSESSION_ATTR);
  Privilege privilege=null;
  if (context != null && context.isAuthenticated()) {
    UserService us=context.getUserService();
    String r=request.getParameter("privilege");
    if (r != null)     privilege=us.getPrivilege(r);
  }
  if (privilege == null)   privilege=new Privilege();
  return privilege;
}
