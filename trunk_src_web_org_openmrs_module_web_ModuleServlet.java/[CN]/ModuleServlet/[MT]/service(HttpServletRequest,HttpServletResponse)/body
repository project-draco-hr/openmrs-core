{
  log.debug("In service method for module servlet: " + request.getPathInfo());
  String moduleId=request.getPathInfo();
  int end=moduleId.indexOf("/",1);
  if (end > 0)   moduleId=moduleId.substring(1,end);
  log.debug("ModuleId: " + moduleId);
  Module mod=ModuleFactory.getModuleById(moduleId);
  if (mod == null) {
    log.warn("No module with id " + moduleId + " exists");
    response.setStatus(HttpServletResponse.SC_NOT_FOUND);
    return;
  }
  String servletName=request.getPathInfo();
  int start=moduleId.length() + 2;
  end=servletName.indexOf("/",start);
  if (end == -1 || end > servletName.length())   end=servletName.length();
  servletName=servletName.substring(start,end);
  log.debug("Servlet name: " + servletName);
  HttpServlet servlet=WebModuleUtil.getServlet(mod,servletName);
  if (servlet == null) {
    log.warn("No servlet with name: " + servletName + " was found in module: "+ moduleId);
    response.setStatus(HttpServletResponse.SC_NOT_FOUND);
    return;
  }
  servlet.service(request,response);
}
