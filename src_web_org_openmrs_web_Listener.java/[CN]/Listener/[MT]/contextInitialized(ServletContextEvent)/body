{
  Log log=LogFactory.getLog(Listener.class);
  log.debug("Starting the OpenMRS webapp");
  try {
    ServletContext servletContext=event.getServletContext();
    loadConstants(servletContext);
    clearDWRFile(servletContext);
    Properties props=getRuntimeProperties();
    if (props != null) {
      runtimePropertiesFound=true;
      Context.setRuntimeProperties(props);
    }
    Thread.currentThread().setContextClassLoader(OpenmrsClassLoader.getInstance());
    if (!setupNeeded()) {
      copyCustomizationIntoWebapp(servletContext,props);
      super.contextInitialized(event);
      startOpenmrs(event.getServletContext());
    }
  }
 catch (  Throwable t) {
    log.fatal("Got exception while starting up: ",t);
  }
}
