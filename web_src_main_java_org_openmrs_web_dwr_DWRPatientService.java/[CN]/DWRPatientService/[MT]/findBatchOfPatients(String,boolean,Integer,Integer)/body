{
  if (maximumResults == null) {
    setMaximumResults(getMaximumSearchResults());
  }
  if (length != null && length > maximumResults) {
    length=maximumResults;
  }
  List<Object> patientList=new Vector<Object>();
  PatientService ps=Context.getPatientService();
  Collection<Patient> patients;
  try {
    patients=ps.getPatients(searchValue,start,length);
  }
 catch (  APIAuthenticationException e) {
    patientList.add(Context.getMessageSourceService().getMessage("Patient.search.error") + " - " + e.getMessage());
    return patientList;
  }
  patientList=new Vector<Object>(patients.size());
  for (  Patient p : patients) {
    patientList.add(new PatientListItem(p,searchValue));
  }
  if (patients.size() == 0 && searchValue.matches(".*\\d+.*")) {
    Collection<IdentifierValidator> pivs=ps.getAllIdentifierValidators();
    boolean shouldWarnUser=true;
    boolean validCheckDigit=false;
    boolean identifierMatchesValidationScheme=false;
    for (    IdentifierValidator piv : pivs) {
      try {
        if (piv.isValid(searchValue)) {
          shouldWarnUser=false;
          validCheckDigit=true;
        }
        identifierMatchesValidationScheme=true;
      }
 catch (      UnallowedIdentifierException e) {
      }
    }
    if (identifierMatchesValidationScheme) {
      if (shouldWarnUser) {
        patientList.add("<p style=\"color:red; font-size:big;\"><b>WARNING: Identifier has been typed incorrectly!  Please double check the identifier.</b></p>");
      }
 else       if (validCheckDigit) {
        patientList.add("<p style=\"color:green; font-size:big;\"><b>This identifier has been entered correctly, but still no patients have been found.</b></p>");
      }
    }
  }
  return patientList;
}
