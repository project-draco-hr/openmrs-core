{
  File manifest=findManifest(tempDir);
  if (manifest == null) {
    log.warn("Missing manifest!");
    return null;
  }
  String solutionVersion=null;
  try {
    DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
    DocumentBuilder db=dbf.newDocumentBuilder();
    Document doc=db.parse(manifest);
    Element elem=getSingleElement(doc,"xsf:xDocumentClass");
    if (elem == null) {
      log.warn("Could not locate xsf:xDocumentClass element in manifest!");
      return null;
    }
    solutionVersion=elem.getAttribute("solutionVersion");
    if (elem.getAttribute("name") != null)     elem.removeAttribute("name");
    elem.setAttribute("trustSetting","manual");
    elem.setAttribute("trustLevel","domain");
    elem.setAttribute("publishUrl",url);
    elem.setAttribute("xmlns:openmrs",namespace);
    writeXml(doc,manifest.getPath());
  }
 catch (  ParserConfigurationException e) {
    log.error("Error parsing form data",e);
  }
catch (  SAXException e) {
    log.error("Error parsing form data",e);
  }
catch (  IOException e) {
    log.error("Error parsing form data",e);
  }
  return solutionVersion;
}
