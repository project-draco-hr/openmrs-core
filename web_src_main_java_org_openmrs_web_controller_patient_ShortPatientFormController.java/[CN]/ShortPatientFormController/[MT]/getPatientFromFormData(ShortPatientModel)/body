{
  Patient patient=patientModel.getPatient();
  PersonName personName=patientModel.getPersonName();
  if (personName != null) {
    personName.setPreferred(true);
    patient.addName(personName);
  }
  PersonAddress personAddress=patientModel.getPersonAddress();
  if (personAddress != null) {
    if (personAddress.isVoided() && StringUtils.isBlank(personAddress.getVoidReason())) {
      personAddress.setVoidReason(Context.getMessageSourceService().getMessage("general.default.voidReason"));
    }
 else     if (!(personAddress.isVoided() && personAddress.getPersonAddressId() == null)) {
      personAddress.setPreferred(true);
      patient.addAddress(personAddress);
    }
  }
  for (  PatientIdentifier id : patientModel.getIdentifiers()) {
    if (id.getPatientIdentifierId() == null && id.isVoided())     continue;
    patient.addIdentifier(id);
  }
  for (  PersonAttribute formAttribute : patientModel.getPersonAttributes())   patient.addAttribute(formAttribute);
  return patient;
}
