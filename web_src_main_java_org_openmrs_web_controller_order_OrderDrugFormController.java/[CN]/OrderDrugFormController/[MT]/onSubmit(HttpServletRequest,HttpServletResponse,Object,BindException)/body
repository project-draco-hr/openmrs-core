{
  String view;
  DrugOrder order=(DrugOrder)obj;
  if (order.getOrderType() == null) {
    order.setOrderType(Context.getOrderService().getOrderType(OpenmrsConstants.ORDERTYPE_DRUG));
  }
  boolean ok=executeCommand(order,request);
  if (ok) {
    int patientId=order.getPatient().getPatientId();
    view=getSuccessView() + "?patientId=" + patientId;
  }
 else {
    return showForm(request,response,errors);
  }
  return new ModelAndView(new RedirectView(view));
}
