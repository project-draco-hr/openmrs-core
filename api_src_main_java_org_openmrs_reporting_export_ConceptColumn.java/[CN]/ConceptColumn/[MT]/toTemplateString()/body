{
  Concept concept=Context.getConceptService().getConcept(conceptId);
  StringBuilder toReturn;
  if (!concept.isSet()) {
    toReturn=new StringBuilder(toSingleTemplateString(concept.getConceptId()));
  }
 else {
    List<Concept> setMembers=Context.getConceptService().getConceptsByConceptSet(concept);
    toReturn=new StringBuilder("");
    boolean firstMember=true;
    for (    Concept setMember : setMembers) {
      if (firstMember) {
        toReturn.append(toSingleTemplateString(setMember.getConceptId()));
        firstMember=false;
      }
 else {
        toReturn.append("$!{fn.getSeparator()}");
        toReturn.append(toSingleTemplateString(setMember.getConceptId()));
      }
    }
  }
  return toReturn.toString();
}
