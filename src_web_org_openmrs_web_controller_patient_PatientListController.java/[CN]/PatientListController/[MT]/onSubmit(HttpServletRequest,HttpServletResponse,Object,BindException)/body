{
  HttpSession httpSession=request.getSession();
  Context context=(Context)httpSession.getAttribute(WebConstants.OPENMRS_CONTEXT_HTTPSESSION_ATTR);
  Locale locale=request.getLocale();
  String view=getFormView();
  if (context != null && context.isAuthenticated()) {
    String[] patientList=request.getParameterValues("patientId");
    PatientService ps=context.getPatientService();
    for (    String o : patientList) {
      ps.voidPatient(ps.getPatient(Integer.valueOf(o)),"");
    }
    httpSession.setAttribute(WebConstants.OPENMRS_MSG_ATTR,"Patient.voided");
    view=getSuccessView();
  }
  return new ModelAndView(new RedirectView(view));
}
