{
  init();
  createWebInfFolderIfNotExist();
  HttpServletResponse response=new MockHttpServletResponse();
  URL url=OpenmrsClassLoader.getInstance().getResource("org/openmrs/module/include/test3-1.0-SNAPSHOT.omod");
  MockMultipartFile file=new MockMultipartFile("moduleFile","test3-1.0-SNAPSHOT.omod",null,new FileInputStream(url.getFile()));
  MockMultipartHttpServletRequest request=new MockMultipartHttpServletRequest();
  request.addFile(file);
  request.setParameter("action","upload");
  request.setParameter("update","true");
  request.setParameter("moduleId",MODULE3_ID);
  ModuleListController controller=(ModuleListController)applicationContext.getBean("moduleListController");
  controller.handleRequest(request,response);
  assertTrue("Module.loadedAndStarted".equals(request.getSession().getAttribute(WebConstants.OPENMRS_MSG_ATTR)));
  assertTrue(request.getSession().getAttribute(WebConstants.OPENMRS_ERROR_ATTR) == null);
}
