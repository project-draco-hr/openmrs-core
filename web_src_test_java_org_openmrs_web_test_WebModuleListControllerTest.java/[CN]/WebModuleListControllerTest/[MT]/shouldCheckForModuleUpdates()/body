{
  Module module1=ModuleFactory.getModuleById(MODULE1_ID);
  URL url=OpenmrsClassLoader.getInstance().getResource("org/openmrs/module/include/test1-update.rdf");
  module1.setUpdateURL("file:" + url.getFile());
  Module module2=ModuleFactory.getModuleById(MODULE2_ID);
  url=OpenmrsClassLoader.getInstance().getResource("org/openmrs/module/include/test2-update.rdf");
  module2.setUpdateURL("file:" + url.getFile());
  Module module3=ModuleFactory.getModuleById(MODULE3_ID);
  url=OpenmrsClassLoader.getInstance().getResource("org/openmrs/module/include/test3-update.rdf");
  module3.setUpdateURL("file:" + url.getFile());
  assertTrue(module1.getDownloadURL() == null);
  assertTrue(module1.getUpdateVersion() == null);
  assertTrue(module2.getDownloadURL() == null);
  assertTrue(module2.getUpdateVersion() == null);
  assertTrue(module3.getDownloadURL() == null);
  assertTrue(module3.getUpdateVersion() == null);
  MockHttpServletRequest request=new MockHttpServletRequest("POST","");
  HttpServletResponse response=new MockHttpServletResponse();
  ModuleListController controller=(ModuleListController)applicationContext.getBean("moduleListController");
  controller.handleRequest(request,response);
  assertTrue(request.getSession().getAttribute(WebConstants.OPENMRS_MSG_ATTR) == null);
  assertTrue(request.getSession().getAttribute(WebConstants.OPENMRS_ERROR_ATTR) == null);
  assertTrue(module1.getDownloadURL().equals("http://modules.openmrs.org/modules/download/test1/test1-2.0-SNAPSHOT.omod"));
  assertTrue(module1.getUpdateVersion().equals("2.0-SNAPSHOT"));
  assertTrue(module2.getDownloadURL().equals("http://modules.openmrs.org/modules/download/test2/test2-2.0-SNAPSHOT.omod"));
  assertTrue(module2.getUpdateVersion().equals("2.0-SNAPSHOT"));
  assertTrue(module3.getDownloadURL().equals("http://modules.openmrs.org/modules/download/test3/test3-2.0-SNAPSHOT.omod"));
  assertTrue(module3.getUpdateVersion().equals("2.0-SNAPSHOT"));
}
