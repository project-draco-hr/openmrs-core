{
  Cohort cohort=new Cohort();
  cohort.setName("A Cohort");
  cohort.setDescription("Just for testing");
  cohort.addMember(2);
  cohort=Context.getCohortService().saveCohort(cohort);
  DataExportReportObject export=new DataExportReportObject();
  export.setName("Cohort column");
  SimpleColumn patientId=new SimpleColumn("PATIENT_ID","$!{fn.patientId}");
  export.getColumns().add(patientId);
  CohortColumn cohortCol=new CohortColumn("InCohort",cohort.getCohortId(),null,null,"Yes","No");
  export.getColumns().add(cohortCol);
  Cohort patients=new Cohort();
  patients.addMember(2);
  patients.addMember(6);
  DataExportUtil.generateExport(export,patients,"\t",null);
  File exportFile=DataExportUtil.getGeneratedFile(export);
  String expectedOutput="PATIENT_ID\tInCohort\n2\tYes\n6\tNo\n";
  String output=OpenmrsUtil.getFileAsString(exportFile);
  exportFile.delete();
  assertEquals("The output is not right.",expectedOutput,output);
}
