{
  DataExportReportObject export=new DataExportReportObject();
  export.setName("CONSTRUCT EXPORT");
  SimpleColumn patientId=new SimpleColumn("PATIENT_ID","$!{fn.patientId}");
  export.getColumns().add(patientId);
  ConceptColumn firstObs=new ConceptColumn("CONSTRUCT",DataExportReportObject.MODIFIER_FIRST,1,"23",null);
  export.getColumns().add(firstObs);
  ConceptColumn secondObs=new ConceptColumn("WEIGHT",DataExportReportObject.MODIFIER_FIRST,1,"5089",null);
  export.getColumns().add(secondObs);
  Cohort patients=new Cohort();
  patients.addMember(7);
  patients.addMember(8);
  DataExportUtil.generateExport(export,patients,"\t",null);
  File exportFile=DataExportUtil.getGeneratedFile(export);
  String expectedOutput="PATIENT_ID	\"FOOD ASSISTANCE\"	\"DATE OF FOOD ASSISTANCE\"	\"FAVORITE FOOD, NON-CODED\"	\"WEIGHT\"\n7	YES	14/08/2008	PB and J	50.0\n8				\n";
  String output=OpenmrsUtil.getFileAsString(exportFile);
  exportFile.delete();
  assertEquals("The output is not right.",expectedOutput,output);
}
