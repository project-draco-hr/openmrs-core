{
  if ("patient".equals(personType)) {
    if ("edit".equals(viewType))     return request.getContextPath() + PATIENT_EDIT_URL + getParametersForURL(personId,personType);
    if ("shortEdit".equals(viewType))     return request.getContextPath() + PATIENT_SHORT_EDIT_URL + getParametersForURL(personId,personType);
 else     if ("view".equals(viewType))     return request.getContextPath() + PATIENT_VIEW_URL + getParametersForURL(personId,personType);
  }
 else   if ("user".equals(personType)) {
    return request.getContextPath() + USER_EDIT_URL + getParametersForURL(personId,personType);
  }
 else {
    if ("edit".equals(viewType)) {
      return request.getContextPath() + PERSON_EDIT_URL + getParametersForURL(personId,personType);
    }
  }
  throw new ServletException("You entered viewType = \"" + viewType + "\" and personType = \""+ personType+ "\" which is an invalid viewType/personType combination.\n"+ "Valid viewType/personType combinations are edit/patient, shortEdit/patient, view/patient, anyViewType/user and edit/anyPersonType\n");
}
