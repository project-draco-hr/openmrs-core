{
  Map<String,String> person=getParametersFromRequest(request);
  if ("patient".equals(personType)) {
    if ("edit".equals(viewType)) {
      return request.getContextPath() + PATIENT_EDIT_URL + getParametersForURL(person);
    }
    if ("shortEdit".equals(viewType)) {
      return request.getContextPath() + PATIENT_SHORT_EDIT_URL + getParametersForURL(person);
    }
 else     if ("view".equals(viewType)) {
      return request.getContextPath() + PATIENT_VIEW_URL + getParametersForURL(person);
    }
  }
 else   if ("user".equals(personType)) {
    return request.getContextPath() + USER_EDIT_URL + getParametersForURL(person);
  }
 else {
    if ("edit".equals(viewType)) {
      return request.getContextPath() + PERSON_EDIT_URL + getParametersForURL(person);
    }
  }
  throw new ServletException("You entered viewType = \"" + viewType + "\" and personType = \""+ personType+ "\" which is an invalid viewType/personType combination.\n"+ "Valid viewType/personType combinations are edit/patient, edit/user, shortEdit/patient, view/patient. The viewType edit is valid without any personType. Also, the personType user is valid without any viewType. \n");
}
