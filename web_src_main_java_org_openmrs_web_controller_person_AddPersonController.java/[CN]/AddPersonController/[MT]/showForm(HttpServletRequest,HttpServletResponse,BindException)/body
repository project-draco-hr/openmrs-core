{
  log.debug("In showForm method");
  ModelAndView mav=super.showForm(request,response,errors);
  if (invalidAgeFormat) {
    mav=new ModelAndView(FORM_ENTRY_ERROR_URL);
    mav.addObject("errorTitle","Person.age.error");
    mav.addObject("errorMessage","Person.birthdate.required");
    return mav;
  }
  Object o=mav.getModel().get(this.getCommandName());
  List personList=(List)o;
  log.debug("Found list of size: " + personList.size());
  if (personList.size() < 1 && Context.isAuthenticated()) {
    HashMap<String,String> person=getParametersFromRequest(request);
    String name=person.get(NAME);
    String birthdate=person.get(BIRTH_DATE);
    String age=person.get(AGE);
    String gender=person.get(GENDER);
    String viewType=person.get(VIEW_TYPE);
    String personType=person.get(PERSON_TYPE);
    if (viewType == null) {
      viewType="edit";
    }
    log.debug("name: " + name + " birthdate: "+ birthdate+ " age: "+ age+ " gender: "+ gender);
    if (StringUtils.isNotEmpty(name) || StringUtils.isNotEmpty(birthdate) || StringUtils.isNotEmpty(age)|| StringUtils.isNotEmpty(gender)) {
      mav.clear();
      mav.setView(new RedirectView(getPersonURL("",personType,viewType,request)));
    }
  }
  return mav;
}
