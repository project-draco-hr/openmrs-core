{
  if (patient != null) {
    this.patient=patient;
    this.personName=patient.getPersonName();
    this.personAddress=patient.getPersonAddress();
    List<PatientIdentifier> activeIdentifiers=patient.getActiveIdentifiers();
    if (activeIdentifiers.isEmpty())     activeIdentifiers.add(new PatientIdentifier(null,null,Context.getLocation()));
    identifiers=ListUtils.lazyList(new ArrayList<PatientIdentifier>(activeIdentifiers),FactoryUtils.instantiateFactory(PatientIdentifier.class));
    List<PersonAttributeType> viewableAttributeTypes=Context.getPersonService().getPersonAttributeTypes(PERSON_TYPE.PATIENT,ATTR_VIEW_TYPE.VIEWING);
    List<PersonAttribute> activePatientAttributes=patient.getActiveAttributes();
    personAttributes=new ArrayList<PersonAttribute>();
    if (!CollectionUtils.isEmpty(viewableAttributeTypes)) {
      for (      PersonAttribute personAttribute : activePatientAttributes) {
        if (viewableAttributeTypes.contains(personAttribute.getAttributeType()))         personAttributes.add(personAttribute);
      }
    }
  }
}
