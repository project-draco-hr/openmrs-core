{
  if (CustomDatatype.VIEW_FAST.equals(view)) {
    return Context.getMessageSourceService().getMessage("org.openmrs.customdatatype.datatype.LongFreeTextDatatype.placeholderValue",new Object[]{referenceString},Context.getLocale());
  }
 else   if (CustomDatatype.VIEW_HTML_SUMMARY.equals(view)) {
    ClobDatatypeStorage storage=Context.getDatatypeService().getClobDatatypeStorageByUuid(referenceString);
    if (storage == null)     return Context.getMessageSourceService().getMessage("CustomDatatype.error.missingValue");
    String s=storage.getValue();
    if (s.length() > 100)     return s.substring(0,100) + "...";
 else     return s;
  }
 else {
    ClobDatatypeStorage storage=Context.getDatatypeService().getClobDatatypeStorageByUuid(referenceString);
    if (storage == null)     return Context.getMessageSourceService().getMessage("CustomDatatype.error.missingValue");
    return storage.getValue();
  }
}
