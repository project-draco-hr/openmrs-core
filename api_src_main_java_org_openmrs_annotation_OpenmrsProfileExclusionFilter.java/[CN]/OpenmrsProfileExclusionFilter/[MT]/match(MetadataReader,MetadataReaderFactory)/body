{
  Map<String,Object> openmrsProfile=metadataReader.getAnnotationMetadata().getAnnotationAttributes("org.openmrs.annotation.OpenmrsProfile");
  if (openmrsProfile != null) {
    Object openmrsVersion=openmrsProfile.get("openmrsVersion");
    if (StringUtils.isNotBlank((String)openmrsVersion)) {
      if (!ModuleUtil.matchRequiredVersions(OpenmrsConstants.OPENMRS_VERSION_SHORT,(String)openmrsVersion)) {
        return true;
      }
    }
    String[] modules=(String[])openmrsProfile.get("modules");
    for (    String moduleAndVersion : modules) {
      boolean exclude=true;
      String[] splitModuleAndVersion=moduleAndVersion.split(":");
      String moduleId=splitModuleAndVersion[0];
      String moduleVersion=splitModuleAndVersion[1];
      for (      Module module : ModuleFactory.getStartedModules()) {
        if (module.getModuleId().equals(moduleId)) {
          if (ModuleUtil.matchRequiredVersions(module.getVersion(),moduleVersion)) {
            exclude=false;
            break;
          }
        }
      }
      if (exclude) {
        return exclude;
      }
    }
  }
  return false;
}
