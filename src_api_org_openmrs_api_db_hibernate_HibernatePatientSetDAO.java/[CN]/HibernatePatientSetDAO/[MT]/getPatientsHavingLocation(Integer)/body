{
  Session session=HibernateUtil.currentSession();
  HibernateUtil.beginTransaction();
  Query query;
  StringBuffer sb=new StringBuffer();
  sb.append("select distinct patient_id from encounter e " + "where location_id = :location_id ");
  query=session.createSQLQuery(sb.toString());
  query.setInteger("location_id",locationId);
  PatientSet ret=new PatientSet();
  List<Integer> patientIds=query.list();
  ret.setPatientIds(new HashSet<Integer>(patientIds));
  HibernateUtil.commitTransaction();
  return ret;
}
