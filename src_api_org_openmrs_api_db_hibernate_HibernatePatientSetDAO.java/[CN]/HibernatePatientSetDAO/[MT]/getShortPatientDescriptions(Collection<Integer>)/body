{
  Map<Integer,String> ret=new HashMap<Integer,String>();
  Query query=sessionFactory.getCurrentSession().createQuery("select patient.personId, patient.gender, patient.birthdate from Patient patient");
  query.setCacheMode(CacheMode.IGNORE);
  List<Object[]> temp=query.list();
  long now=System.currentTimeMillis();
  for (  Object[] results : temp) {
    if (!patientIds.contains(results[0])) {
      continue;
    }
    StringBuffer sb=new StringBuffer();
    if ("M".equals(results[1])) {
      sb.append("Male");
    }
 else {
      sb.append("Female");
    }
    Date bd=(Date)results[2];
    if (bd != null) {
      int age=(int)((now - bd.getTime()) / MS_PER_YEAR);
      sb.append(", ").append(age).append(" years old");
    }
    ret.put((Integer)results[0],sb.toString());
  }
  return ret;
}
