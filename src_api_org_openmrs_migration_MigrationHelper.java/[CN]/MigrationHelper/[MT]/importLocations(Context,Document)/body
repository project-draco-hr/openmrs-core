{
  int ret=0;
  EncounterService es=context.getEncounterService();
  AdministrationService as=context.getAdministrationService();
  List<Node> toAdd=new ArrayList<Node>();
  findNodesNamed(document,"location",toAdd);
  for (  Node node : toAdd) {
    Element e=(Element)node;
    String name=e.getAttribute("name");
    if (name == null || name.length() == 0) {
      throw new IllegalArgumentException("each <location /> element must define a name attribute");
    }
    if (es.getLocationByName(name) != null) {
      continue;
    }
    Location location=new Location();
    location.setName(name);
    as.createLocation(location);
    ++ret;
  }
  return ret;
}
