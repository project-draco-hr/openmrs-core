{
  User user=Context.getAuthenticatedUser();
  if (user == null) {
    throw new APIException("No Authenticated user found");
  }
  user.getUserProperties().clear();
  for (  Map.Entry<String,String> entry : properties.entrySet()) {
    user.setUserProperty(entry.getKey(),entry.getValue());
  }
  return dao.saveUser(user,null);
}
