{
  executeDataSet(VISITS_WITH_DATES_XML);
  Visit visit=service.getVisit(7);
  List<Encounter> encountersByVisit=Context.getEncounterService().getEncountersByVisit(visit,true);
  Assert.assertEquals(2,encountersByVisit.size());
  service.voidVisit(visit,"test reason");
  Assert.assertTrue(visit.isVoided());
  encountersByVisit=Context.getEncounterService().getEncountersByVisit(visit,false);
  Assert.assertTrue(encountersByVisit.isEmpty());
  visit=service.unvoidVisit(visit);
  Assert.assertFalse(visit.isVoided());
  encountersByVisit=Context.getEncounterService().getEncountersByVisit(visit,false);
  Assert.assertEquals(1,encountersByVisit.size());
}
