{
  VisitService vs=Context.getVisitService();
  Integer originalSize=vs.getAllVisits().size();
  Visit visit=new Visit(new Patient(2),new VisitType(1),new Date());
  Set<Encounter> encounters=new HashSet<Encounter>();
  encounters.add(Context.getEncounterService().getEncounter(1));
  visit.setEncounters(encounters);
  visit=vs.saveVisit(visit);
  Assert.assertNotNull(visit.getId());
  Assert.assertNotNull(visit.getUuid());
  Assert.assertNotNull(visit.getCreator());
  Assert.assertNotNull(visit.getDateCreated());
  Assert.assertEquals(originalSize + 1,vs.getAllVisits().size());
  Assert.assertTrue(visit.getEncounters().size() == 1);
}
