{
  executeDataSet(CREATE_PATIENT_XML);
  Collection<Patient> johnPatients=ps.getPatients("John",null,null);
  assertNotNull("There should be a patient named 'John'",johnPatients);
  assertFalse("There should be a patient named 'John'",johnPatients.isEmpty());
  Patient firstJohnPatient=johnPatients.iterator().next();
  String identifier=firstJohnPatient.getPatientIdentifier().getIdentifier();
  assertNotNull("Uh oh, the patient doesn't have an identifier",identifier);
  List<Patient> patients=ps.getPatients(null,identifier,null);
  assertTrue("Odd. The firstJohnPatient isn't in the list of patients for this identifier",patients.contains(firstJohnPatient));
}
