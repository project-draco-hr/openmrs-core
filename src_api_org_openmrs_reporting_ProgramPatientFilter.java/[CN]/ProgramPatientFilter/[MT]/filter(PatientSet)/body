{
  if (!isReadyToRun())   return null;
  PatientSetService service=Context.getPatientSetService();
  PatientSet matches=null;
  if (onDate != null)   matches=service.getPatientsInProgram(program,onDate,onDate);
 else   matches=service.getPatientsInProgram(program,fromDate,toDate);
  return input == null ? matches : input.intersect(matches);
}
