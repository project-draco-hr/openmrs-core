{
  Log log=LogFactory.getLog(Listener.class);
  String contextPath="";
  try {
    contextPath=servletContext.getContextPath();
  }
 catch (  NoSuchMethodError ex) {
    try {
      String path=servletContext.getResource("/").getPath();
      contextPath=path.substring(0,path.lastIndexOf("/"));
      contextPath=contextPath.substring(contextPath.lastIndexOf("/"));
    }
 catch (    Exception e) {
      log.warn("Cannot find the contextPath of current webapp.",e);
    }
  }
catch (  Exception e) {
    log.warn("ContextPath not defined",e);
  }
  if (contextPath.indexOf("/") != -1) {
    contextPath=contextPath.substring(1);
  }
  return contextPath;
}
