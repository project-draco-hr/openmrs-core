{
  String[] locationComponents=pv1.getComponents(3);
  Integer locationId=null;
  try {
    locationId=context.getHL7Service().resolveLocationId(locationComponents);
  }
 catch (  HL7Exception ex) {
    throw new HL7Exception("Error retrieving Location from PV1.'Assigned Patient Location'",ex);
  }
  if (locationId == null) {
    throw new HL7Exception("Could not find Assigned Patient Location specified in PV1 segment");
  }
 else {
    return context.getEncounterService().getLocation(locationId);
  }
}
