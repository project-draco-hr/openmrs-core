{
  String hl7ProviderId=pv1.getComponent(7,1);
  Integer providerId=null;
  User provider;
  try {
    providerId=Integer.parseInt(hl7ProviderId);
  }
 catch (  NumberFormatException e) {
    throw new HL7Exception("Invalid provider ID '" + hl7ProviderId + "'");
  }
  if (providerId == null || providerId == 0)   throw new HL7Exception("Unable to parse provider ID '" + hl7ProviderId + "'");
  try {
    provider=context.getUserService().getUser(providerId);
  }
 catch (  Exception e) {
    throw new HL7Exception("Error retrieving provider " + providerId,e);
  }
  if (provider == null || provider.getUserId() == null)   throw new HL7Exception("Could not find provider (User) " + providerId);
  return provider;
}
