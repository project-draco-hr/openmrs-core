{
  if (archive == null)   return;
  if (!OpenmrsUtil.nullSafeEquals(archive.getMessageState(),HL7Constants.HL7_STATUS_MIGRATED) || archive.isLoaded())   return;
  try {
    archive.setHL7Data(OpenmrsUtil.getFileAsString(new File(new URI(archive.getHL7Data()))));
    archive.setLoaded(true);
  }
 catch (  URISyntaxException e) {
    throw new APIException("malformed HL7 archive location: " + archive.getHL7Data(),e);
  }
catch (  IOException e) {
    throw new APIException("unable to convert HL7 archive file to a string: " + archive.getHL7Data(),e);
  }
}
