{
  Patient p=Context.getPatientService().getPatient(2);
  HttpServletResponse response=new MockHttpServletResponse();
  PatientFormController controller=(PatientFormController)applicationContext.getBean("patientForm");
  controller.setApplicationContext(applicationContext);
  MockHttpServletRequest request=new MockHttpServletRequest("POST","");
  request.setParameter("action","Patient.void");
  request.setParameter("voidReason","");
  BindException errors=new BindException(p,"patient");
  ModelAndView modelAndview=controller.onSubmit(request,response,p,errors);
  Assert.assertTrue(!p.isVoided());
  String tmp=request.getSession().getAttribute(WebConstants.OPENMRS_ERROR_ATTR).toString();
  Assert.assertEquals(tmp,"Patient.error.void.reasonEmpty");
}
