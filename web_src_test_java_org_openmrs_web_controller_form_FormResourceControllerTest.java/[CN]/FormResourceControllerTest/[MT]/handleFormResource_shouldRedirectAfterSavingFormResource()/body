{
  Form form=new Form();
  form.setId(1);
  form.setName("test form");
  form.setFormId(1);
  form.setVersion("1.0.0");
  FormResource resource=new FormResource();
  resource.setName("test resource");
  resource.setForm(form);
  resource.setFormResourceId(1);
  resource.setId(1);
  byte[] fileContent="Hello World".getBytes();
  String fileName="/resources/testfile.ico";
  MockMultipartHttpServletRequest request=new MockMultipartHttpServletRequest();
  MockMultipartFile file=new MockMultipartFile("resourceValue",fileName,"text/plain",fileContent);
  request.setMethod("POST");
  request.setParameter("datatype",(new LongFreeTextDatatype()).getClass().getName());
  request.setParameter("handler",(new LongFreeTextFileUploadHandler()).getClass().getName());
  request.addFile(file);
  Errors errors=Mockito.mock(Errors.class);
  Mockito.when(errors.hasErrors()).thenReturn(false);
  FormResourceController controller=new FormResourceController();
  String expectedUrl="redirect:formResources.form?formId=1";
  String actualUrl=controller.handleAddFormResource(resource,errors,request);
  Assert.assertEquals(expectedUrl,actualUrl);
}
