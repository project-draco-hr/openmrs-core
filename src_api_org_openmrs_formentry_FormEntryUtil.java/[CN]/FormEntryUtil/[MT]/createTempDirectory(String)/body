{
  String dirname=System.getProperty("java.io.tmpdir");
  if (dirname == null)   throw new IOException("Cannot determine system temporary directory");
  File directory=new File(dirname);
  if (!directory.exists())   throw new IOException("System temporary directory " + directory.getName() + " does not exist.");
  if (!directory.isDirectory())   throw new IOException("System temporary directory " + directory.getName() + " is not really a directory.");
  File tempDir;
  do {
    String filename=prefix + System.currentTimeMillis();
    tempDir=new File(directory,filename);
  }
 while (tempDir.exists());
  if (!tempDir.mkdir())   throw new IOException("Could not create temporary directory '" + tempDir.getAbsolutePath() + "'");
  return tempDir;
}
