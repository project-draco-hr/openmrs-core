{
  executeDataSet(ORDER_ENTRY_DATASET_XML);
  Patient patient=patientService.getPatient(7);
  CareSetting careSetting=orderService.getCareSetting(1);
  int activeDrugOrderCount=orderService.getActiveOrders(patient,DrugOrder.class,careSetting,null).size();
  DrugOrder order=new DrugOrder();
  order.setPatient(patient);
  order.setConcept(conceptService.getConcept(5497));
  order.setCareSetting(careSetting);
  order.setOrderer(Context.getProviderService().getProvider(1));
  order.setStartDate(new Date());
  order.setDrug(conceptService.getDrug(1));
  order.setDosingType(DrugOrder.DosingType.SIMPLE);
  order.setDose(300.0);
  order.setDoseUnits(conceptService.getConcept(50));
  order.setQuantity(20.0);
  order.setQuantityUnits(conceptService.getConcept(51));
  order.setDuration(20.0);
  order.setDurationUnits(conceptService.getConcept(1002));
  order.setFrequency(orderService.getOrderFrequency(1003));
  orderService.saveOrder(order);
  List<DrugOrder> activeOrders=orderService.getActiveOrders(patient,DrugOrder.class,careSetting,null);
  assertEquals(++activeDrugOrderCount,activeOrders.size());
  assertThat(activeOrders,hasItems(order));
}
