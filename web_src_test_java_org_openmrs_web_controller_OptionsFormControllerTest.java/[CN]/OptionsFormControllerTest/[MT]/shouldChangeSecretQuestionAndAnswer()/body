{
  MockHttpServletRequest request=new MockHttpServletRequest("POST","");
  request.setParameter("secretQuestionPassword","test");
  request.setParameter("secretQuestionNew","test_question");
  String answer="test_answer";
  String hashedAnswer=Security.encodeString(answer);
  request.setParameter("secretAnswerNew",answer);
  request.setParameter("secretAnswerConfirm",answer);
  HttpServletResponse response=new MockHttpServletResponse();
  controller.handleRequest(request,response);
  LoginCredential loginCredential=userDao.getLoginCredential(user);
  assertEquals(Security.encodeString(answer + loginCredential.getSalt()),loginCredential.getSecretAnswer());
}
