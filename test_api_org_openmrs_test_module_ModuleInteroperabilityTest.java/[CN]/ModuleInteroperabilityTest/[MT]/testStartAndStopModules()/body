{
  OpenmrsClassLoader loader=OpenmrsClassLoader.getInstance();
  Class<?> atdServiceClass=loader.loadClass("org.openmrs.module.atdproducer.service.ATDService");
  Class<?> dssServiceClass=loader.loadClass("org.openmrs.module.dssmodule.DssService");
  assertNotNull(atdServiceClass);
  assertNotNull(dssServiceClass);
  ModuleClassLoader atdClassLoader=(ModuleClassLoader)atdServiceClass.getClassLoader();
  assertEquals("atd",atdClassLoader.getModule().getModuleId());
  ModuleClassLoader dssClassLoader=(ModuleClassLoader)dssServiceClass.getClassLoader();
  assertEquals("dssmodule",dssClassLoader.getModule().getModuleId());
  Class<?> dssUtilClass=atdClassLoader.loadClass("org.openmrs.module.dssmodule.util.Util");
  ModuleClassLoader dssUtilClassLoader=(ModuleClassLoader)dssUtilClass.getClassLoader();
  assertEquals("dssmodule",dssUtilClassLoader.getModule().getModuleId());
  Class<?> dssServiceClass2=atdClassLoader.loadClass("org.openmrs.module.dssmodule.DssService");
  ModuleClassLoader dssServiceClassLoader=(ModuleClassLoader)dssServiceClass2.getClassLoader();
  assertEquals("dssmodule",dssServiceClassLoader.getModule().getModuleId());
  Module atdModule=ModuleFactory.getModuleById("atd");
  ModuleFactory.stopModule(atdModule);
}
