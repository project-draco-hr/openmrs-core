{
  EncounterService es=Context.getEncounterService();
  EncounterTypeFormController controller=(EncounterTypeFormController)applicationContext.getBean("encounterTypeForm");
  controller.setApplicationContext(applicationContext);
  controller.setSuccessView("index.htm");
  controller.setFormView("EncounterType.form");
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/admin/encounters/encounterType.form?encounterTypeId=1");
  request.setSession(new MockHttpSession(null));
  HttpServletResponse response=new MockHttpServletResponse();
  controller.handleRequest(request,response);
  request.setMethod("POST");
  request.addParameter("action","Save EncounterType");
  ModelAndView mav=controller.handleRequest(request,response);
  Assert.assertSame(controller.getFormView(),mav.getViewName());
  Assert.assertNotEquals("The save attempt should have passed!","index.htm",mav.getViewName());
  Assert.assertNotNull(es.getEncounterType(1));
}
