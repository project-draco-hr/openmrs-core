{
  if (conceptName == null) {
    throw new Exception("conceptName cannot be null");
  }
  if (conceptNameMap.containsKey(conceptName)) {
    return conceptNameMap.get(conceptName);
  }
  Concept c;
  try {
    Integer conceptId=Integer.valueOf(conceptName);
    c=conceptService.getConcept(conceptId);
  }
 catch (  NumberFormatException e) {
    c=conceptService.getConceptByName(conceptName);
  }
  if (c == null) {
    throw new APIException("Concept.not.found",new Object[]{conceptName});
  }
  conceptNameMap.put(conceptName,c);
  return c;
}
