{
  if (cohortMap.containsKey(key))   return cohortMap.get(key).contains(getPatientId());
  EvaluationContext context=new EvaluationContext();
  log.debug("getting cohort/definition for key: " + key);
  Cohort ps=null;
  if (key.startsWith("C.")) {
    ps=Context.getCohortService().getCohort(Integer.valueOf(key.substring(2)));
  }
 else   if (key.startsWith("F.")) {
    PatientFilter pf=Context.getReportObjectService().getPatientFilterById(Integer.valueOf(key.substring(2)));
    ps=pf.filter(getPatientSet(),context);
  }
 else   if (key.startsWith("S.")) {
    PatientSearchReportObject ro=(PatientSearchReportObject)Context.getReportObjectService().getReportObject(Integer.valueOf(key.substring(2)));
    PatientFilter pf=OpenmrsUtil.toPatientFilter(ro.getPatientSearch(),null);
    ps=pf.filter(getPatientSet(),context);
  }
 else {
    log.error("key = " + key);
  }
  Set<Integer> set=new HashSet<Integer>(ps.getMemberIds());
  cohortMap.put(key,set);
  return set.contains(getPatientId());
}
