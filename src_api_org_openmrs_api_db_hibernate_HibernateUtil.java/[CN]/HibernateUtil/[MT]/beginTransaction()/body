{
  log.debug("beginning transaction");
  Transaction tx=(Transaction)threadLocalTransaction.get();
  if (tx == null) {
    tx=currentSession().beginTransaction();
    threadLocalTransaction.set(tx);
  }
}
