{
  MessageSourceService msa=Context.getMessageSourceService();
  Locale locale=Context.getLocale();
  StringBuilder ret=new StringBuilder();
  ret.append(msa.getMessage("reporting.patientsWith")).append(" ");
  if (atLeastCount != null || atMostCount != null) {
    if (atLeastCount != null) {
      ret.append(msa.getMessage("reporting.atLeast",new Object[]{atLeastCount},locale)).append(" ");
    }
    if (atMostCount != null) {
      ret.append(msa.getMessage("reporting.atMost",new Object[]{atMostCount},locale)).append(" ");
    }
  }
 else {
    ret.append(msa.getMessage("reporting.any")).append(" ");
  }
  if (encounterTypeList != null) {
    ret.append("[");
    for (Iterator<EncounterType> i=encounterTypeList.iterator(); i.hasNext(); ) {
      ret.append(" ").append(i.next().getName());
      if (i.hasNext()) {
        ret.append(" ,");
      }
    }
    ret.append(" ] ");
  }
  ret.append(msa.getMessage("reporting.encounters")).append(" ");
  if (location != null) {
    ret.append(msa.getMessage("reporting.at",new Object[]{location.getName()},locale)).append(" ");
  }
  if (withinLastMonths != null || withinLastDays != null) {
    if (withinLastMonths != null) {
      ret.append(" ").append(msa.getMessage("reporting.withinTheLastMonths",new Object[]{withinLastMonths},locale));
    }
    if (withinLastDays != null) {
      ret.append(" ").append(msa.getMessage("reporting.withinTheLastDays",new Object[]{withinLastDays},locale));
    }
  }
  if (sinceDate != null) {
    ret.append(msa.getMessage("reporting.onOrAfter",new Object[]{sinceDate},locale));
  }
  if (untilDate != null) {
    ret.append(msa.getMessage("reporting.onOrBefore",new Object[]{untilDate},locale));
  }
  if (form != null) {
    ret.append(msa.getMessage("reporting.fromThe",new Object[]{form.getName()},locale));
  }
  return ret.toString();
}
