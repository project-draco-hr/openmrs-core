{
  Set<Integer> current=null;
  for (int i=0; i < searchHistory.size(); ++i) {
    PatientSet ps=getPatientSet(i);
    if (current == null)     current=new HashSet<Integer>(ps.getPatientIds());
 else     current.retainAll(ps.getPatientIds());
  }
  if (current == null)   return Context.getPatientSetService().getAllPatients();
 else {
    List<Integer> ret=new ArrayList<Integer>(current);
    Collections.sort(ret);
    PatientSet ps=new PatientSet();
    ps.setPatientIds(ret);
    return ps;
  }
}
