{
  MockServletContext sc=new MockServletContext();
  SimpleWebApplicationContext wac=new SimpleWebApplicationContext();
  wac.setServletContext(sc);
  wac.setNamespace("test");
  wac.refresh();
  MockHttpServletRequest request=new MockHttpServletRequest(sc);
  request.addPreferredLocale(Context.getLocale());
  MockHttpServletResponse response=new MockHttpServletResponse();
  request.setAttribute(DispatcherServlet.WEB_APPLICATION_CONTEXT_ATTRIBUTE,wac);
  openmrsMessageTag=new OpenmrsMessageTag();
  mockPageContext=new MockPageContext(sc,request,response);
  openmrsMessageTag.setPageContext(mockPageContext);
}
