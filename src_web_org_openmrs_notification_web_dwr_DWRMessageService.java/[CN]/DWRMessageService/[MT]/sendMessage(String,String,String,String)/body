{
  Vector<Object> objectList=new Vector<Object>();
  Context context=(Context)WebContextFactory.get().getSession().getAttribute(WebConstants.OPENMRS_CONTEXT_HTTPSESSION_ATTR);
  HttpServletRequest request=WebContextFactory.get().getHttpServletRequest();
  log.error("path translated: " + request.getPathTranslated());
  log.error("uri: " + request.getRequestURI());
  log.error("server name: " + request.getServerName());
  log.error("local name: " + request.getLocalName());
  if (context == null) {
    objectList.add("Your session has expired.");
    objectList.add("Please <a href='" + request.getContextPath() + "/logout'>log in</a> again.");
  }
 else {
    try {
      MessageService messageService=context.getMessageService();
      messageService.send(recipients,sender,subject,content);
      objectList.add("Message has been sent successfully.");
    }
 catch (    Exception e) {
      log.error(e);
      objectList.add("Error while attempting to send message: " + e.getMessage());
    }
  }
  return objectList;
}
