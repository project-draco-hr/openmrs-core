{
  new Thread(){
    @Override public void run(){
      try {
synchronized (contextRefreshedLock) {
          while (!contextRefreshedCheck) {
            log.warn("Waiting to get service: " + classString + " while the context is being refreshed");
            contextRefreshedLock.wait();
            log.warn("Finished waiting to get service " + classString + " while the context was being refreshed");
          }
        }
        Daemon.runStartupForService(openmrsService);
      }
 catch (      InterruptedException e) {
        log.warn("Refresh lock was interrupted while waiting to run OpenmrsService.onStartup() for " + classString,e);
      }
    }
  }
.start();
}
