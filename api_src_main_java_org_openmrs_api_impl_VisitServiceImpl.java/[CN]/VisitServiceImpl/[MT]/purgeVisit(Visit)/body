{
  if (visit.getVisitId() == null) {
    return;
  }
  if (Context.getEncounterService().getEncountersByVisit(visit,true).size() > 0) {
    throw new APIException(Context.getMessageSourceService().getMessage("Visit.purge.inUse",null,"Cannot purge a visit that has encounters associated to it",Context.getLocale()));
  }
  dao.deleteVisit(visit);
}
