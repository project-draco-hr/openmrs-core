{
  DWRObsService dwrService=new DWRObsService();
  ConceptService conceptService=Context.getConceptService();
  ObsService obsService=Context.getObsService();
  AdministrationService administrationService=Context.getAdministrationService();
  Person person=Context.getPersonService().getPerson(2);
  Concept concept=conceptService.getConcept(18);
  List<Obs> obsListBefore=obsService.getObservationsByPersonAndConcept(person,concept);
  int obsListSizeBeforeSaveObs=obsListBefore.size();
  String obsDateTime="3/12/2014";
  dwrService.createObs(2,null,18,"True",obsDateTime);
  List<Obs> obsListAfter=obsService.getObservationsByPersonAndConcept(person,concept);
  assertEquals(obsListSizeBeforeSaveObs + 1,obsListAfter.size());
  String booleanConceptId=administrationService.getGlobalProperty("concept.true");
  Concept booleanConcept=Context.getConceptService().getConcept(Integer.parseInt(booleanConceptId));
  Obs addedObs=(Obs)CollectionUtils.subtract(obsListAfter,obsListBefore).iterator().next();
  assertNotNull(addedObs);
  assertNotNull(addedObs.getValueCoded());
  assertEquals(booleanConcept,addedObs.getValueCoded());
}
