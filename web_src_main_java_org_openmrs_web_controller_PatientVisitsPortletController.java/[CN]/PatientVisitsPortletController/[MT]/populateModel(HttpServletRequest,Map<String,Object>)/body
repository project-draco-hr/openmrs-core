{
  if (log.isDebugEnabled())   log.debug("In PatientVisitsPortletController...");
  PortletControllerUtil.addFormToEditAndViewUrlMaps(model);
  List<Encounter> otherEncounters=new ArrayList<Encounter>();
  Patient patient=(Patient)model.get("patient");
  if (patient.getPatientId() != null) {
    otherEncounters=Context.getEncounterService().getEncountersByPatient(patient);
    CollectionUtils.filter(otherEncounters,new Predicate(){
      @Override public boolean evaluate(      Object object){
        Encounter e=(Encounter)object;
        return e.getVisit() == null;
      }
    }
);
  }
  model.put("otherEncounters",otherEncounters);
}
