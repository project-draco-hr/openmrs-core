{
  Patient preferred=patientService.getPatient(999);
  Patient notPreferred=patientService.getPatient(2);
  Order order=Context.getOrderService().getOrdersByPatient(notPreferred).get(0);
  PersonMergeLog audit=mergeAndRetrieveAudit(preferred,notPreferred);
  String addedOrderUuid=null;
  List<Order> orders=Context.getOrderService().getOrdersByPatient(preferred);
  for (  Order o : orders) {
    if (o.getInstructions().equals(order.getInstructions())) {
      addedOrderUuid=o.getUuid();
    }
  }
  Assert.assertNotNull("expected new order was not found for the preferred patient after the merge",addedOrderUuid);
  Assert.assertTrue("order creation not audited",isValueInList(addedOrderUuid,audit.getPersonMergeLogData().getCreatedOrders()));
}
