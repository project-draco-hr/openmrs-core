{
  try {
    Session session=HibernateUtil.currentSession();
    HibernateUtil.beginTransaction();
    String sql="insert into ";
    sql+=OpenmrsConstants.DATABASE_BUSINESS_NAME + ".ext_mrn_log ";
    sql+="(date_generated, generated_by, site, mrn_first, mrn_count) values (?, ?, ?, ?, ?)";
    PreparedStatement ps=session.connection().prepareStatement(sql);
    ps.setTimestamp(1,new Timestamp(new Date().getTime()));
    ps.setInt(2,context.getAuthenticatedUser().getUserId());
    ps.setString(3,site);
    ps.setInt(4,start);
    ps.setInt(5,count);
    ps.execute();
    HibernateUtil.commitTransaction();
  }
 catch (  Exception e) {
    HibernateUtil.rollbackTransaction();
    throw new DAOException(e);
  }
}
