{
  Session session=HibernateUtil.currentSession();
  Set<Patient> patients=new LinkedHashSet<Patient>();
  name=name.replace(", "," ");
  String[] names=name.split(" ");
  log.debug("name: " + name);
  Criteria criteria=session.createCriteria(Patient.class).createAlias("names","name");
  for (  String n : names) {
    if (n != null && n.length() > 0) {
      criteria.add(Expression.or(Expression.like("name.familyName",n,MatchMode.START),Expression.or(Expression.like("name.middleName",n,MatchMode.START),Expression.like("name.givenName",n,MatchMode.START))));
    }
  }
  if (includeVoided == false) {
    criteria.add(Expression.eq("voided",new Boolean(false)));
  }
  criteria.addOrder(Order.asc("name.givenName"));
  criteria.addOrder(Order.asc("name.middleName"));
  criteria.addOrder(Order.asc("name.familyName"));
  patients.addAll(criteria.list());
  return patients;
}
