{
  String regex=OpenmrsConstants.PATIENT_IDENTIFIER_REGEX;
  regex=regex.replace("@SEARCH@",identifier);
  Criteria criteria=sessionFactory.getCurrentSession().createCriteria(PatientIdentifier.class);
  criteria.setProjection(Projections.property("patient"));
  criteria.add(Restrictions.sqlRestriction("identifier regexp '" + regex + "'"));
  if (includeVoided == false) {
    criteria.createAlias("patient","pat");
    criteria.add(Restrictions.eq("pat.voided",false));
  }
  List<Patient> patients=criteria.list();
  Set<Patient> returnSet=new LinkedHashSet<Patient>();
  returnSet.addAll(patients);
  return returnSet;
}
