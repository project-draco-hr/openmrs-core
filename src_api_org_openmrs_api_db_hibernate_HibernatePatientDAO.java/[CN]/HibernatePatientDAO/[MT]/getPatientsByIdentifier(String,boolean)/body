{
  Query query;
  String sql="select patient from Patient patient, PersonName name join patient.identifiers ids where ids.voided = false and ids.identifier = :id and patient.patientId = name.person.personId";
  String order=" order by name.givenName asc, name.middleName asc, name.familyName asc";
  if (includeVoided) {
    query=sessionFactory.getCurrentSession().createQuery(sql + order);
    query.setString("id",identifier);
  }
 else {
    query=sessionFactory.getCurrentSession().createQuery(sql + " and patient.voided = :void" + order);
    query.setString("id",identifier);
    query.setBoolean("void",includeVoided);
  }
  Set<Patient> returnSet=new LinkedHashSet<Patient>();
  returnSet.addAll(query.list());
  return returnSet;
}
