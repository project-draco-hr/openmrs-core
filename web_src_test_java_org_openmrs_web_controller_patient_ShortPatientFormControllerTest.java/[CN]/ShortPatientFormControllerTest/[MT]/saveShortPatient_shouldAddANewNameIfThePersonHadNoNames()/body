{
  Patient p=Context.getPatientService().getPatient(2);
  p.getPersonName().setVoided(true);
  Context.getPatientService().savePatient(p);
  Assert.assertNull(p.getPersonName());
  PersonName newName=new PersonName("new",null,"name");
  newName.setDateCreated(new Date());
  ShortPatientModel patientModel=new ShortPatientModel(p);
  patientModel.setPersonName(newName);
  BindException errors=new BindException(patientModel,"patientModel");
  ServletWebRequest mockWebRequest=new ServletWebRequest(new MockHttpServletRequest());
  ShortPatientFormController controller=(ShortPatientFormController)applicationContext.getBean("shortPatientFormController");
  String redirectUrl=controller.saveShortPatient(mockWebRequest,new PersonName(),(PersonAddress)p.getPersonAddress().clone(),patientModel,errors);
  Assert.assertTrue("Should pass with no validation errors",!errors.hasErrors());
  Assert.assertEquals("redirect:/patientDashboard.form?patientId=" + p.getPatientId(),redirectUrl);
  Assert.assertNotNull(newName.getId());
}
