{
  Criteria criteria=sessionFactory.getCurrentSession().createCriteria(User.class);
  if (includeVoided == false)   criteria.add(Expression.eq("voided",false));
  List<User> returnList=new Vector<User>();
  if (roles != null && roles.size() > 0) {
    for (    Object o : criteria.list()) {
      User u=(User)o;
      for (      Role r : roles)       if (r != null) {
        if (u.hasRole(r.getRole(),true)) {
          returnList.add(u);
          break;
        }
      }
    }
  }
 else   returnList=criteria.list();
  return returnList;
}
