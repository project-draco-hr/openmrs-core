{
  Session session=HibernateUtil.currentSession();
  List<User> users=new Vector<User>();
  name=name.replace(", "," ");
  String[] names=name.split(" ");
  log.debug("name: " + name);
  Criteria criteria=session.createCriteria(User.class);
  for (  String n : names) {
    if (n != null && n.length() > 0) {
      criteria.add(Expression.or(Expression.like("lastName",n,MatchMode.START),Expression.or(Expression.like("firstName",n,MatchMode.START),Expression.or(Expression.like("middleName",n,MatchMode.START),Expression.like("systemId",n,MatchMode.START)))));
    }
  }
  if (includeVoided == false)   criteria.add(Expression.eq("voided",false));
  List returnList=new Vector();
  if (roles != null && roles.size() > 0) {
    for (    Object o : criteria.list()) {
      User u=(User)o;
      for (      String r : roles)       if (u.hasRole(r,true)) {
        returnList.add(u);
        break;
      }
    }
  }
 else   returnList=criteria.list();
  return returnList;
}
