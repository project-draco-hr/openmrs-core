{
  PreparedStatement ps=null;
  try {
    ps=getUpdateUserPasswordStatement();
    if (ps != null) {
      ps.setString(1,newPassword);
      ps.setString(2,salt);
      ps.setInt(3,changedBy);
      ps.setDate(4,new java.sql.Date(dateChanged.getTime()));
      ps.setInt(5,userIdToChange);
      ps.executeUpdate();
    }
  }
 catch (  SQLException e) {
    log.warn("SQL Exception while running user-password-update ",e);
  }
 finally {
    if (ps != null) {
      try {
        ps.close();
      }
 catch (      SQLException e) {
        log.error("Error generated while closing statement",e);
      }
    }
  }
  sessionFactory.getCurrentSession().flush();
}
