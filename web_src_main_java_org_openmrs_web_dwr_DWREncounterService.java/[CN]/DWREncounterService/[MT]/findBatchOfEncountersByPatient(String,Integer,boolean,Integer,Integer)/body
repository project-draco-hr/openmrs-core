{
  Vector<Object> objectList=new Vector<Object>();
  MessageSourceService mss=Context.getMessageSourceService();
  try {
    EncounterService es=Context.getEncounterService();
    List<Encounter> encs=new Vector<Encounter>();
    if (phrase == null) {
      objectList.add(mss.getMessage("Encounter.searchPhraseCannotBeNull"));
      return objectList;
    }
    if (phrase.matches("\\d+")) {
      Encounter e=es.getEncounter(Integer.valueOf(phrase));
      if ((e != null && (patientId == null || patientId.equals(e.getPatient().getPatientId()))) && (!e.isVoided() || includeVoided == true)) {
        encs.add(e);
      }
    }
    if (phrase.equals("")) {
    }
 else {
      encs.addAll(es.getEncounters(phrase,patientId,start,length,includeVoided));
    }
    if (encs.size() == 0) {
      objectList.add(mss.getMessage("Encounter.noMatchesFound",new Object[]{phrase},Context.getLocale()));
    }
 else {
      objectList=new Vector<Object>(encs.size());
      for (      Encounter e : encs) {
        objectList.add(new EncounterListItem(e));
      }
    }
  }
 catch (  Exception e) {
    log.error("Error while searching for encounters",e);
    objectList.add(mss.getMessage("Encounter.search.error") + " - " + e.getMessage());
  }
  return objectList;
}
