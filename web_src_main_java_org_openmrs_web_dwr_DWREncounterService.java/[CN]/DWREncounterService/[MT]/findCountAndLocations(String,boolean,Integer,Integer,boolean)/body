{
  Map<String,Object> resultsMap=new HashMap<String,Object>();
  Vector<Object> objectList=new Vector<Object>();
  try {
    LocationService es=Context.getLocationService();
    int locationCount=0;
    if (getMatchCount)     locationCount+=es.getCountOfLocations(phrase,includeRetired);
    if (locationCount > 0 || !getMatchCount)     objectList=findBatchOfLocations(phrase,includeRetired,start,length);
    resultsMap.put("count",locationCount);
    resultsMap.put("objectList",objectList);
  }
 catch (  Exception e) {
    log.error("Error while searching for locations",e);
    objectList.clear();
    objectList.add(Context.getMessageSourceService().getMessage("Location.search.error") + " - " + e.getMessage());
    resultsMap.put("count",0);
    resultsMap.put("objectList",objectList);
  }
  return resultsMap;
}
