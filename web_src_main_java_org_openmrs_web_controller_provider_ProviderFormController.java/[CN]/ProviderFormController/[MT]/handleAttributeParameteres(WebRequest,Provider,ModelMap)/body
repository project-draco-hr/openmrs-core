{
  for (  ProviderAttributeType providerAttributeType : (List<ProviderAttributeType>)model.get("providerAttributeTypes")) {
    if (providerAttributeType.getMaxOccurs() == null || providerAttributeType.getMaxOccurs() != 1)     throw new RuntimeException("For now only attributes with maxOccurs=1 are supported");
    AttributeHandler<?> handler=Context.getAttributeService().getHandler(providerAttributeType);
    for (Iterator<String> iter=request.getParameterNames(); iter.hasNext(); ) {
      String paramName=iter.next();
      if (paramName.startsWith("attribute." + providerAttributeType.getId())) {
        String paramValue=request.getParameter(paramName);
        if (StringUtils.hasText(paramValue)) {
          handler.deserialize(paramValue);
          setAttribute(provider,providerAttributeType,paramValue);
        }
 else {
          for (          ProviderAttribute providerAttribute : provider.getActiveAttributes(providerAttributeType))           providerAttribute.setVoided(true);
        }
      }
    }
  }
}
