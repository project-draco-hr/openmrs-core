{
  initializeInMemoryDatabase();
  executeDataSet("org/openmrs/test/report/include/ReportTests-patients.xml");
  authenticate();
  EvaluationContext evalContext=new EvaluationContext();
  DataSetService service=Context.getDataSetService();
  PatientSearch kids=PatientSearch.createFilterSearch(PatientCharacteristicFilter.class);
  kids.addArgument("maxAge","10",Integer.class);
  CohortDataSetDefinition def1=new CohortDataSetDefinition();
  def1.setName("Cohorts");
  def1.addStrategy("kids",kids);
  DataSet<Object> data1=service.evaluate(def1,null,evalContext);
  System.out.println("---Males---");
  for (  Map<String,Object> row : data1) {
    for (    Map.Entry<String,Object> e : row.entrySet())     System.out.println(e.getKey() + " -> " + e.getValue());
    System.out.println();
  }
  RowPerObsDataSetDefinition def2=new RowPerObsDataSetDefinition();
  def2.setFilter(kids);
  def2.getQuestions().add(Context.getConceptService().getConcept(5089));
  DataSet<Object> data2=service.evaluate(def2,null,evalContext);
  int count=0;
  for (  Map<String,Object> row : data2) {
    ++count;
    if (count > 0)     continue;
    for (    Map.Entry<String,Object> e : row.entrySet())     System.out.println(e.getKey() + " -> " + e.getValue());
    System.out.println();
  }
  System.out.println("count = " + count);
}
