{
  if (!this.inheritsRoles())   return children;
  Set<Role> allRoles=new HashSet<Role>();
  Set<Role> myRoles=new HashSet<Role>();
  allRoles.addAll(children);
  myRoles.addAll(this.getInheritedRoles());
  myRoles.removeAll(children);
  myRoles.remove(this);
  allRoles.addAll(myRoles);
  for (  Role r : myRoles) {
    if (r.inheritsRoles())     allRoles.addAll(r.recurseOverParents(allRoles));
  }
  log.debug("Total roles: " + allRoles);
  return allRoles;
}
