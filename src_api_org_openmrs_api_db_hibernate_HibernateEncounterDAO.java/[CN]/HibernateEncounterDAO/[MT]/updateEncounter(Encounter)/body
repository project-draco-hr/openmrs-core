{
  log.debug("Updating encounter: " + encounter.getEncounterId());
  if (encounter.getCreator() == null)   createEncounter(encounter);
 else {
    Encounter e=(Encounter)sessionFactory.getCurrentSession().merge(encounter);
    sessionFactory.getCurrentSession().evict(e);
    sessionFactory.getCurrentSession().saveOrUpdate(encounter);
  }
}
