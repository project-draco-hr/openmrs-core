{
  Criteria crit=sessionFactory.getCurrentSession().createCriteria(Encounter.class);
  if (who != null)   crit.add(Expression.eq("patient",who));
  if (fromDate != null)   crit.add(Expression.ge("encounterDatetime",fromDate));
  if (toDate != null)   crit.add(Expression.le("encounterDatetime",toDate));
  if (enteredViaForms != null && enteredViaForms.size() > 0)   crit.add(Expression.in("form",enteredViaForms));
  if (encounterTypes != null && encounterTypes.size() > 0)   crit.add(Expression.in("encounterType",encounterTypes));
  if (!includeVoided)   crit.add(Expression.eq("voided",false));
  crit.addOrder(Order.asc("encounterDatetime"));
  return crit.list();
}
