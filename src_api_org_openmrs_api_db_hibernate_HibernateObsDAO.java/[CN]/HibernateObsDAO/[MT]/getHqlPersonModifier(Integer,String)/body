{
  String from="from Obs obs";
  List<String> whereClauses=new Vector<String>();
  if (whereClause != null && whereClause.length() > 0) {
    whereClauses.add("(" + whereClause + ")");
  }
  if ((personType & ObsService.PATIENT) == ObsService.PATIENT) {
    from+=", Patient p";
    whereClauses.add("p.patientId = obs.person.personId");
  }
  if ((personType & ObsService.USER) == ObsService.USER) {
    from+=", User u";
    whereClauses.add("u.userId = obs.person.personId");
  }
  if ((personType & ObsService.PERSON) == ObsService.PERSON) {
  }
  if (whereClauses.size() > 0)   from=from + " where " + OpenmrsUtil.join(whereClauses," and ");
  return from + " ";
}
