{
  if (concept.getConceptId() == null)   createConcept(concept);
 else {
    Session session=HibernateUtil.currentSession();
    try {
      HibernateUtil.beginTransaction();
      modifyCollections(concept);
      session.update(concept);
      HibernateUtil.commitTransaction();
    }
 catch (    StaleObjectStateException sose) {
      HibernateUtil.beginTransaction();
      Query query=session.createQuery("insert into ConceptNumeric (conceptId) select c.conceptId from Concept c where c.conceptId = :id)");
      query.setInteger("id",concept.getConceptId());
      query.executeUpdate();
      session.update(concept);
      HibernateUtil.commitTransaction();
    }
catch (    Exception e) {
      HibernateUtil.rollbackTransaction();
      throw new APIException(e);
    }
    context.getAdministrationService().updateConceptWord(concept);
  }
}
