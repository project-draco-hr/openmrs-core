{
  Session session=HibernateUtil.currentSession();
  if (drug.getDrugId() == null)   createDrug(drug);
 else {
    if (drug.getCreator() == null)     drug.setCreator(context.getAuthenticatedUser());
    if (drug.getDateCreated() == null)     drug.setDateCreated(new Date());
    try {
      HibernateUtil.beginTransaction();
      session.update(drug);
      HibernateUtil.commitTransaction();
    }
 catch (    Exception e) {
      HibernateUtil.rollbackTransaction();
      throw new APIException(e);
    }
  }
}
