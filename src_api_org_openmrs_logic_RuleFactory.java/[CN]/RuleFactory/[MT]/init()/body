{
  try {
    ObsDataSource obsdatasource=(ObsDataSource)Context.getLogicService().getLogicDataSource("obs");
    ArrayList<String> classes=new ArrayList<String>();
    classes.add("Test");
    classes.add("Finding");
    classes.add("Question");
    for (    String currClass : classes) {
      ConceptClass cc=Context.getConceptService().getConceptClassByName(currClass);
      List<Concept> classConcepts=Context.getConceptService().getConceptsByClass(cc);
      for (      Concept c : classConcepts) {
        String name=c.getBestName(Context.getLocale()).getName();
        obsdatasource.addKey(name);
        ruleMap.put(name,new ReferenceRule("obs." + name));
      }
    }
    ruleMap.put("HIV POSITIVE",new HIVPositiveRule());
    ruleMap.put("GENDER",getRule("%%person.gender"));
    ruleMap.put("BIRTHDATE",getRule("%%person.birthdate"));
    ruleMap.put("BIRTHDATE ESTIMATED",getRule("%%person.birthdate estimated"));
    ruleMap.put("DEAD",getRule("%%person.dead"));
    ruleMap.put("DEATH DATE",getRule("%%person.death date"));
    ruleMap.put("CAUSE OF DEATH",getRule("%%person.cause of death"));
    ruleMap.put("AGE",new AgeRule());
  }
 catch (  LogicException e) {
    log.error("Error during RuleFactory initialization",e);
  }
}
