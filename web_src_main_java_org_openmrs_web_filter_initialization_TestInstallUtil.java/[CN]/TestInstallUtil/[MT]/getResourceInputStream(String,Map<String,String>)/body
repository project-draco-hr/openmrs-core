{
  HttpURLConnection urlConnection=(HttpURLConnection)new URL(urlString).openConnection();
  urlConnection.setRequestMethod("POST");
  urlConnection.setConnectTimeout(15000);
  urlConnection.setUseCaches(false);
  urlConnection.setDoOutput(true);
  String requestParams="";
  if (parameterMap != null) {
    boolean isFirst=true;
    for (    Entry<String,String> entry : parameterMap.entrySet()) {
      requestParams+=((!isFirst ? "&" : "") + entry.getKey() + "="+ entry.getValue());
      if (isFirst)       isFirst=false;
    }
  }
  OutputStreamWriter out=new OutputStreamWriter(urlConnection.getOutputStream());
  out.write(requestParams);
  out.flush();
  out.close();
  if (log.isInfoEnabled())   log.info("Http response message:" + urlConnection.getResponseMessage() + ", Code:"+ urlConnection.getResponseCode());
  if (urlConnection.getResponseCode() == HttpURLConnection.HTTP_UNAUTHORIZED)   throw new APIAuthenticationException("Invalid username or password");
 else   if (urlConnection.getResponseCode() == HttpURLConnection.HTTP_INTERNAL_ERROR)   throw new APIException("An error occurred on the production server");
  return urlConnection.getInputStream();
}
