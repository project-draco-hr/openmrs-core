{
  EncounterService es=Context.getEncounterService();
  Encounter enc=es.getEncounter(1);
  Obs o=new Obs();
  o.setConcept(new Concept(1));
  o.setCreator(Context.getAuthenticatedUser());
  o.setDateCreated(new Date());
  o.setPerson(enc.getPatient());
  o.setObsDatetime(enc.getEncounterDatetime());
  Date newDate=new Date();
  assertNotSame(enc.getEncounterDatetime(),newDate);
  enc.setEncounterDatetime(newDate);
  enc.addObs(o);
  es.saveEncounter(enc);
  assertEquals(enc.getEncounterDatetime(),newDate);
  assertEquals(enc.getEncounterDatetime(),o.getObsDatetime());
}
