{
  Set<Obs> obsToVoid=new HashSet<Obs>();
  obsToVoid.add(obs);
  Obs testObs=obs;
  List<Obs> childGroups=new ArrayList<Obs>();
  while (testObs.isObsGrouping()) {
    for (    Obs oInner : testObs.getGroupMembers()) {
      if (oInner.isObsGrouping())       childGroups.add(oInner);
      obsToVoid.add(oInner);
    }
    if (childGroups.size() > 0)     testObs=childGroups.remove(childGroups.size() - 1);
 else     testObs=new Obs();
  }
  for (  Obs o : obsToVoid) {
    o.setVoided(true);
    o.setVoidReason(reason);
    o.setVoidedBy(Context.getAuthenticatedUser());
    o.setDateVoided(new Date());
  }
  getObsDAO().updateObs(obs);
}
