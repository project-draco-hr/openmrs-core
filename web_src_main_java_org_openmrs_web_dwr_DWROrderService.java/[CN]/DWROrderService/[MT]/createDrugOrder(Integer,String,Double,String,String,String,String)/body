{
  log.debug("PatientId is " + patientId + " and drugId is "+ drugId+ " and dose is "+ dose+ " and units are "+ units+ " and frequency is "+ frequency+ " and startDate is "+ startDate+ " and instructions are "+ instructions);
  boolean ret=true;
  DrugOrder drugOrder=new DrugOrder();
  Patient patient=Context.getPatientService().getPatient(patientId);
  Drug drug=Context.getConceptService().getDrugByNameOrId(drugId);
  if (drug == null)   throw new DWRException("There is no drug with the name or drugId of: " + drugId);
  OrderType orderType=Context.getOrderService().getOrderType(OpenmrsConstants.ORDERTYPE_DRUG);
  if (orderType == null)   throw new DWRException("There is no 'Drug' Order Type in the system.  This must be an Order Type with orderTypeId = " + OpenmrsConstants.ORDERTYPE_DRUG);
  drugOrder.setDrug(drug);
  Concept concept=drug.getConcept();
  drugOrder.setConcept(concept);
  drugOrder.setOrderType(orderType);
  drugOrder.setPatient(patient);
  drugOrder.setDose(dose);
  drugOrder.setUnits(units);
  drugOrder.setFrequency(frequency);
  drugOrder.setInstructions(instructions);
  Date dStartDate=null;
  if (startDate != null) {
    SimpleDateFormat sdf=Context.getDateFormat();
    try {
      dStartDate=sdf.parse(startDate);
    }
 catch (    ParseException e) {
      throw new DWRException(e.getMessage());
    }
  }
  drugOrder.setStartDate(dStartDate);
  drugOrder.setDateCreated(new Date());
  drugOrder.setVoided(new Boolean(false));
  try {
    Context.getOrderService().saveOrder(drugOrder);
  }
 catch (  APIException e) {
    throw new DWRException(e.getMessage());
  }
  log.debug("Finished creating new drug order");
  return ret;
}
